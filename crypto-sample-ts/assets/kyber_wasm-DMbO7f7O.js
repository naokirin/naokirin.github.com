let r,l=null;function u(){return(l===null||l.byteLength===0)&&(l=new Uint8Array(r.memory.buffer)),l}let S=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});S.decode();const M=2146435072;let E=0;function j(t,e){return E+=e,E>=M&&(S=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),S.decode(),E=e),S.decode(u().subarray(t,t+e))}function k(t,e){return t=t>>>0,j(t,e)}function d(t){const e=r.__externref_table_alloc();return r.__wbindgen_externrefs.set(e,t),e}function g(t,e){try{return t.apply(this,e)}catch(n){const i=d(n);r.__wbindgen_exn_store(i)}}function b(t,e){return t=t>>>0,u().subarray(t/1,t/1+e)}let o=0;const y=new TextEncoder;"encodeInto"in y||(y.encodeInto=function(t,e){const n=y.encode(t);return e.set(n),{read:t.length,written:n.length}});function D(t,e,n){if(n===void 0){const _=y.encode(t),a=e(_.length,1)>>>0;return u().subarray(a,a+_.length).set(_),o=_.length,a}let i=t.length,s=e(i,1)>>>0;const w=u();let c=0;for(;c<i;c++){const _=t.charCodeAt(c);if(_>127)break;w[s+c]=_}if(c!==i){c!==0&&(t=t.slice(c)),s=n(s,i,i=c+t.length*3,1)>>>0;const _=u().subarray(s+c,s+i),a=y.encodeInto(t,_);c+=a.written,s=n(s,i,c,1)>>>0}return o=c,s}let f=null;function R(){return(f===null||f.buffer.detached===!0||f.buffer.detached===void 0&&f.buffer!==r.memory.buffer)&&(f=new DataView(r.memory.buffer)),f}function A(t){return t==null}function z(t,e){return r.add(t,e)>>>0}function v(t,e){const n=e(t.length*1,1)>>>0;return u().set(t,n/1),o=t.length,n}function B(t,e,n){const i=v(t,r.__wbindgen_malloc),s=o,w=v(e,r.__wbindgen_malloc),c=o,_=v(n,r.__wbindgen_malloc),a=o,m=r.decapsulate(i,s,w,c,_,a);var F=b(m[0],m[1]).slice();return r.__wbindgen_free(m[0],m[1]*1,1),F}function C(){r.init()}function P(t){const e=v(t,r.__wbindgen_malloc),n=o,i=r.encapsulate(e,n);return p.__wrap(i)}function V(){const t=r.generate_keypair();return h.__wrap(t)}const x=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_kyberencapsulation_free(t>>>0,1));class p{static __wrap(e){e=e>>>0;const n=Object.create(p.prototype);return n.__wbg_ptr=e,x.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,x.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_kyberencapsulation_free(e,0)}get ciphertext(){const e=r.kyberencapsulation_ciphertext(this.__wbg_ptr);var n=b(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*1,1),n}get shared_secret(){const e=r.kyberencapsulation_shared_secret(this.__wbg_ptr);var n=b(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*1,1),n}}Symbol.dispose&&(p.prototype[Symbol.dispose]=p.prototype.free);const T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_kyberkeypair_free(t>>>0,1));class h{static __wrap(e){e=e>>>0;const n=Object.create(h.prototype);return n.__wbg_ptr=e,T.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_kyberkeypair_free(e,0)}get public_key(){const e=r.kyberkeypair_public_key(this.__wbg_ptr);var n=b(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*1,1),n}get private_key(){const e=r.kyberkeypair_private_key(this.__wbg_ptr);var n=b(e[0],e[1]).slice();return r.__wbindgen_free(e[0],e[1]*1,1),n}}Symbol.dispose&&(h.prototype[Symbol.dispose]=h.prototype.free);const L=new Set(["basic","cors","default"]);async function I(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(i){if(t.ok&&L.has(t.type)&&t.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function W(){const t={};return t.wbg={},t.wbg.__wbg___wbindgen_is_function_ee8a6c5833c90377=function(e){return typeof e=="function"},t.wbg.__wbg___wbindgen_is_object_c818261d21f283a4=function(e){const n=e;return typeof n=="object"&&n!==null},t.wbg.__wbg___wbindgen_is_string_fbb76cb2940daafd=function(e){return typeof e=="string"},t.wbg.__wbg___wbindgen_is_undefined_2d472862bd29a478=function(e){return e===void 0},t.wbg.__wbg___wbindgen_throw_b855445ff6a94295=function(e,n){throw new Error(k(e,n))},t.wbg.__wbg_call_525440f72fbfc0ea=function(){return g(function(e,n,i){return e.call(n,i)},arguments)},t.wbg.__wbg_call_e762c39fa8ea36bf=function(){return g(function(e,n){return e.call(n)},arguments)},t.wbg.__wbg_crypto_574e78ad8b13b65f=function(e){return e.crypto},t.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,n){let i,s;try{i=e,s=n,console.error(k(e,n))}finally{r.__wbindgen_free(i,s,1)}},t.wbg.__wbg_getRandomValues_b8f5dbd5f3995a9e=function(){return g(function(e,n){e.getRandomValues(n)},arguments)},t.wbg.__wbg_length_69bca3cb64fc8748=function(e){return e.length},t.wbg.__wbg_msCrypto_a61aeb35a24c1329=function(e){return e.msCrypto},t.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},t.wbg.__wbg_new_no_args_ee98eee5275000a4=function(e,n){return new Function(k(e,n))},t.wbg.__wbg_new_with_length_01aa0dc35aa13543=function(e){return new Uint8Array(e>>>0)},t.wbg.__wbg_node_905d3e251edff8a2=function(e){return e.node},t.wbg.__wbg_process_dc0fbacc7c1c06f7=function(e){return e.process},t.wbg.__wbg_prototypesetcall_2a6620b6922694b2=function(e,n,i){Uint8Array.prototype.set.call(b(e,n),i)},t.wbg.__wbg_randomFillSync_ac0988aba3254290=function(){return g(function(e,n){e.randomFillSync(n)},arguments)},t.wbg.__wbg_require_60cc747a6bc5215a=function(){return g(function(){return module.require},arguments)},t.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,n){const i=n.stack,s=D(i,r.__wbindgen_malloc,r.__wbindgen_realloc),w=o;R().setInt32(e+4,w,!0),R().setInt32(e+0,s,!0)},t.wbg.__wbg_static_accessor_GLOBAL_89e1d9ac6a1b250e=function(){const e=typeof global>"u"?null:global;return A(e)?0:d(e)},t.wbg.__wbg_static_accessor_GLOBAL_THIS_8b530f326a9e48ac=function(){const e=typeof globalThis>"u"?null:globalThis;return A(e)?0:d(e)},t.wbg.__wbg_static_accessor_SELF_6fdf4b64710cc91b=function(){const e=typeof self>"u"?null:self;return A(e)?0:d(e)},t.wbg.__wbg_static_accessor_WINDOW_b45bfc5a37f6cfa2=function(){const e=typeof window>"u"?null:window;return A(e)?0:d(e)},t.wbg.__wbg_subarray_480600f3d6a9f26c=function(e,n,i){return e.subarray(n>>>0,i>>>0)},t.wbg.__wbg_versions_c01dfd4722a88165=function(e){return e.versions},t.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,n){return k(e,n)},t.wbg.__wbindgen_cast_cb9088102bce6b30=function(e,n){return b(e,n)},t.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_externrefs,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t}function O(t,e){return r=t.exports,U.__wbindgen_wasm_module=e,f=null,l=null,r.__wbindgen_start(),r}function N(t){if(r!==void 0)return r;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module:t}=t:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const e=W();t instanceof WebAssembly.Module||(t=new WebAssembly.Module(t));const n=new WebAssembly.Instance(t,e);return O(n,t)}async function U(t){if(r!==void 0)return r;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL(""+new URL("kyber_wasm_bg-9RDN9wMl.wasm",import.meta.url).href,import.meta.url));const e=W();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:i}=await I(await t,e);return O(n,i)}export{p as KyberEncapsulation,h as KyberKeyPair,z as add,B as decapsulate,U as default,P as encapsulate,V as generate_keypair,C as init,N as initSync};
