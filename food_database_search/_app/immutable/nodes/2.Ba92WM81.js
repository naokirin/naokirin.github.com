import{f as N,a as S}from"../chunks/CVM24_dw.js";import{i as he}from"../chunks/Dslp8A7k.js";import{o as pe}from"../chunks/slwD2xdr.js";import{J,K as W,M as ge,N as q,h as k,a as ye,b as be,o as c,a1 as Ee,r as xe,c as Te,d as Z,s as $,e as Y,i as D,S as Ae,f as ne,g as ve,p as je,X as ie,L as ke,a2 as O,a3 as ee,a4 as G,a5 as we,a6 as Ie,a7 as Me,W as Se,a8 as Le,y as Ne,a9 as Ce,aa as Re,Q as Fe,ab as De,ac as He,ad as Oe,ae as Ve,m as I,af as Be,A as Pe,ag as Ue,ah as Ye,C as Ge,ai as H,G as w,D as E,aj as Ke,F as x,z as Qe,B as ae}from"../chunks/BklJGDdw.js";import{s as L}from"../chunks/D7yZ52KZ.js";import{i as K}from"../chunks/CLrVkAkb.js";let re=!1;function oe(){re||(re=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var a;if(!e.defaultPrevented)for(const r of e.target.elements)(a=r.__on_r)==null||a.call(r)})},{capture:!0}))}function Xe(e){var a=ge,r=q;J(null),W(null);try{return e()}finally{J(a),W(r)}}function qe(e,a,r,l=r){e.addEventListener(a,()=>Xe(r));const t=e.__on_r;t?e.__on_r=()=>{t(),l(!0)}:e.__on_r=()=>l(!0),oe()}function ze(e,a){return a}function Je(e,a,r,l){for(var t=[],i=a.length,v=0;v<i;v++)Me(a[v].e,t,!0);var m=i>0&&t.length===0&&r!==null;if(m){var _=r.parentNode;Se(_),_.append(r),l.clear(),M(e,a[0].prev,a[i-1].next)}Le(t,()=>{for(var p=0;p<i;p++){var s=a[p];m||(l.delete(s.k),M(e,s.prev,s.next)),Ne(s.e,!m)}})}function We(e,a,r,l,t,i=null){var v=e,m={flags:a,items:new Map,first:null};k&&ye();var _=null,p=!1,s=Ee(()=>{var f=r();return ke(f)?f:f==null?[]:ie(f)});be(()=>{var f=c(s),o=f.length;if(p&&o===0)return;p=o===0;let d=!1;if(k){var u=xe(v)===Te;u!==(o===0)&&(v=Z(),$(v),Y(!1),d=!0)}if(k){for(var j=null,b,n=0;n<o;n++){if(D.nodeType===8&&D.data===Ae){v=D,d=!0,Y(!1);break}var h=f[n],T=l(h,n);b=fe(D,m,j,null,h,T,n,t,a,r),m.items.set(T,b),j=b}o>0&&$(Z())}k||Ze(f,m,v,t,a,l,r),i!==null&&(o===0?_?ne(_):_=ve(()=>i(v)):_!==null&&je(_,()=>{_=null})),d&&Y(!0),c(s)}),k&&(v=D)}function Ze(e,a,r,l,t,i,v){var m=e.length,_=a.items,p=a.first,s=p,f,o=null,d=[],u=[],j,b,n,h;for(h=0;h<m;h+=1){if(j=e[h],b=i(j,h),n=_.get(b),n===void 0){var T=s?s.e.nodes_start:r;o=fe(T,a,o,o===null?a.first:o.next,j,b,h,l,t,v),_.set(b,o),d=[],u=[],s=o.next;continue}if($e(n,j,h),(n.e.f&G)!==0&&ne(n.e),n!==s){if(f!==void 0&&f.has(n)){if(d.length<u.length){var A=u[0],y;o=A.prev;var V=d[0],C=d[d.length-1];for(y=0;y<d.length;y+=1)se(d[y],A,r);for(y=0;y<u.length;y+=1)f.delete(u[y]);M(a,V.prev,C.next),M(a,o,V),M(a,C,A),s=A,o=C,h-=1,d=[],u=[]}else f.delete(n),se(n,s,r),M(a,n.prev,n.next),M(a,n,o===null?a.first:o.next),M(a,o,n),o=n;continue}for(d=[],u=[];s!==null&&s.k!==b;)(s.e.f&G)===0&&(f??(f=new Set)).add(s),u.push(s),s=s.next;if(s===null)continue;n=s}d.push(n),o=n,s=n.next}if(s!==null||f!==void 0){for(var g=f===void 0?[]:ie(f);s!==null;)(s.e.f&G)===0&&g.push(s),s=s.next;var R=g.length;if(R>0){var F=null;Je(a,g,F,_)}}q.first=a.first&&a.first.e,q.last=o&&o.e}function $e(e,a,r,l){Ie(e.v,a),e.i=r}function fe(e,a,r,l,t,i,v,m,_,p){var s=(_&Ce)!==0,f=(_&Re)===0,o=s?f?O(t,!1,!1):ee(t):t,d=(_&we)===0?v:ee(v),u={i:d,v:o,k:i,a:null,e:null,prev:r,next:l};try{return u.e=ve(()=>m(e,o,d,p),k),u.e.prev=r&&r.e,u.e.next=l&&l.e,r===null?a.first=u:(r.next=u,r.e.next=u.e),l!==null&&(l.prev=u,l.e.prev=u.e),u}finally{}}function se(e,a,r){for(var l=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,i=e.e.nodes_start;i!==l;){var v=Fe(i);t.before(i),i=v}}function M(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}const ea=Symbol("is custom element"),aa=Symbol("is html");function ra(e){if(k){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;te(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var t=e.checked;te(e,"checked",null),e.checked=t}}};e.__on_r=r,De(r),oe()}}function te(e,a,r,l){var t=sa(e);k&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="loading"&&(e[He]=r),e.removeAttribute(a))}function sa(e){return e.__attributes??(e.__attributes={[ea]:e.nodeName.includes("-"),[aa]:e.namespaceURI===Oe})}function ta(e,a,r=a){var l=Ve();qe(e,"input",t=>{var i=t?e.defaultValue:e.value;if(i=Q(e)?X(i):i,r(i),l&&i!==(i=a())){var v=e.selectionStart,m=e.selectionEnd;e.value=i??"",m!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(m,e.value.length))}}),(k&&e.defaultValue!==e.value||I(a)==null&&e.value)&&r(Q(e)?X(e.value):e.value),Be(()=>{var t=a();Q(e)&&t===X(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function Q(e){var a=e.type;return a==="number"||a==="range"}function X(e){return e===""?null:+e}async function la(){const r=(await(await fetch("./food_database.csv")).text()).split(`
`),l=[];for(let t=3;t<r.length;t++){const i=r[t].trim();if(!i)continue;const v=i.split(",");if(v.length<5)continue;const m=v[0],_=parseFloat(v[1])||0,p=parseFloat(v[2])||0,s=parseFloat(v[3])||0,f=parseFloat(v[4])||0;m&&l.push({name:m,energy:_,protein:p,fat:s,carbohydrate:f})}return l}function le(e,a){if(!a.trim())return[];const r=a.toLowerCase();return e.filter(l=>l.name.toLowerCase().includes(r))}var na=N("<p>データを読み込み中...</p>"),va=N('<div class="table-row svelte-ammj9a"><div class="col name svelte-ammj9a"> </div> <div class="col energy svelte-ammj9a"> </div> <div class="col protein svelte-ammj9a"> </div> <div class="col fat svelte-ammj9a"> </div> <div class="col carb svelte-ammj9a"> </div></div>'),ia=N('<div class="search-results svelte-ammj9a"><h2 class="svelte-ammj9a"> </h2> <div class="results-table svelte-ammj9a"><div class="table-header svelte-ammj9a"><div class="col name svelte-ammj9a">食品名</div> <div class="col energy svelte-ammj9a">エネルギー<br/>(kcal)</div> <div class="col protein svelte-ammj9a">タンパク質<br/>(g)</div> <div class="col fat svelte-ammj9a">脂質<br/>(g)</div> <div class="col carb svelte-ammj9a">炭水化物<br/>(g)</div></div> <!></div></div>'),oa=N("<p>検索結果が見つかりませんでした。</p>"),fa=N('<div class="search-input svelte-ammj9a"><input type="text" placeholder="食品名を入力してください" class="search-field svelte-ammj9a"/></div> <!>',1),ca=N('<div class="food-search svelte-ammj9a"><h1 class="svelte-ammj9a">食品栄養成分検索（食品100gあたり）</h1> <!> <footer class="data-source svelte-ammj9a"><p class="svelte-ammj9a">※ データの出典：日本食品標準成分表（八訂）増補2023年</p></footer></div>');function ua(e,a){Pe(a,!1);let r=O(""),l=O([]),t=O([]),i=O(!0);pe(async()=>{try{H(l,await la())}catch(s){console.error("食品データの読み込みに失敗しました:",s)}finally{H(i,!1)}}),Ue(()=>(c(r),c(l),le),()=>{c(r)&&c(l).length>0?H(t,le(c(l),c(r))):H(t,[])}),Ye(),he();var v=ca(),m=w(E(v),2);{var _=s=>{var f=na();S(s,f)},p=s=>{var f=fa(),o=Qe(f),d=E(o);ra(d),x(o);var u=w(o,2);{var j=n=>{var h=ia(),T=E(h),A=E(T);x(T);var y=w(T,2),V=w(E(y),2);We(V,1,()=>c(t),ze,(C,g)=>{var R=va(),F=E(R),ce=E(F,!0);x(F);var B=w(F,2),ue=E(B,!0);x(B);var P=w(B,2),_e=E(P,!0);x(P);var U=w(P,2),de=E(U,!0);x(U);var z=w(U,2),me=E(z,!0);x(z),x(R),ae(()=>{L(ce,(c(g),I(()=>c(g).name))),L(ue,(c(g),I(()=>c(g).energy))),L(_e,(c(g),I(()=>c(g).protein))),L(de,(c(g),I(()=>c(g).fat))),L(me,(c(g),I(()=>c(g).carbohydrate)))}),S(C,R)}),x(y),x(h),ae(()=>L(A,`検索結果 (${c(t),I(()=>c(t).length)??""}件)`)),S(n,h)},b=(n,h)=>{{var T=A=>{var y=oa();S(A,y)};K(n,A=>{c(r)&&A(T)},h)}};K(u,n=>{c(t),I(()=>c(t).length>0)?n(j):n(b,!1)})}ta(d,()=>c(r),n=>H(r,n)),S(s,f)};K(m,s=>{c(i)?s(_):s(p,!1)})}Ke(2),x(v),S(e,v),Ge()}function ya(e){ua(e,{})}export{ya as component};
