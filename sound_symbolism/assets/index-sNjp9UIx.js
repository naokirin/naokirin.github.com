(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const zn=!1;var wr=Array.isArray,Cs=Array.prototype.indexOf,qr=Array.from,Or=Object.defineProperty,Nt=Object.getOwnPropertyDescriptor,Cn=Object.getOwnPropertyDescriptors,Ts=Object.prototype,$s=Array.prototype,Yr=Object.getPrototypeOf,ln=Object.isExtensible;function Is(e){return typeof e=="function"}const qt=()=>{};function Os(e){return e()}function Pr(e){for(var t=0;t<e.length;t++)e[t]()}function Ps(){var e,t,r=new Promise((s,n)=>{e=s,t=n});return{promise:r,resolve:e,reject:t}}function cr(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const s of e)if(r.push(s),r.length===t)break;return r}const Ie=2,Br=4,br=8,Ct=16,vt=32,Tt=64,Tn=128,Fe=256,hr=512,be=1024,We=2048,dt=4096,Ye=8192,$t=16384,Sr=32768,xr=65536,cn=1<<17,js=1<<18,rr=1<<19,$n=1<<20,jr=1<<21,Gr=1<<22,At=1<<23,kt=Symbol("$state"),Ns=Symbol("legacy props"),Ms=Symbol(""),Kr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ls(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function In(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ds(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ws(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Hs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Us(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function qs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ys(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Er=1,Ar=2,On=4,Gs=8,Ks=16,Js=1,Xs=2,Zs=4,Qs=8,ea=16,ta=1,ra=2,na=4,sa=1,aa=2,me=Symbol(),ia="http://www.w3.org/1999/xhtml";let oa=!1;function Pn(e){return e===this.v}function la(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function jn(e){return!la(e,this.v)}let Vt=!1,ca=!1;function ua(){Vt=!0}let ae=null;function pr(e){ae=e}function Wt(e,t=!1,r){ae={p:ae,c:null,e:null,s:e,x:null,l:Vt&&!t?{s:null,u:null,$:[]}:null}}function Ht(e){var t=ae,r=t.e;if(r!==null){t.e=null;for(var s of r)Bn(s)}return ae=t.p,{}}function nr(){return!Vt||ae!==null&&ae.l===null}const fa=new WeakMap;function va(e){var t=B;if(t===null)return K.f|=At,e;if((t.f&Sr)===0){if((t.f&Tn)===0)throw!t.parent&&e instanceof Error&&Nn(e),e;t.b.error(e)}else Jr(e,t)}function Jr(e,t){for(;t!==null;){if((t.f&Tn)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&Nn(e),e}function Nn(e){const t=fa.get(e);t&&(Or(e,"message",{value:t.message}),Or(e,"stack",{value:t.stack}))}let _r=[];function da(){var e=_r;_r=[],Pr(e)}function kr(e){_r.length===0&&queueMicrotask(da),_r.push(e)}function ha(){for(var e=B.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Ls(),e}function sr(e){var t=Ie|We,r=K!==null&&(K.f&Ie)!==0?K:null;return B===null||r!==null&&(r.f&Fe)!==0?t|=Fe:B.f|=rr,{ctx:ae,deps:null,effects:null,equals:Pn,f:t,fn:e,reactions:null,rv:0,v:me,wv:0,parent:r??B,ac:null}}function pa(e,t){let r=B;r===null&&Ds();var s=r.b,n=void 0,a=Kt(me),o=null,l=!K;return Ra(()=>{try{var u=e();o&&Promise.resolve(u).catch(()=>{})}catch(d){u=Promise.reject(d)}var f=()=>u;n=o?.then(f,f)??Promise.resolve(u),o=n;var v=ye,h=s.pending;l&&(s.update_pending_count(1),h||v.increment());const _=(d,c=void 0)=>{o=null,h||v.activate(),c?c!==Kr&&(a.f|=At,Jt(a,c)):((a.f&At)!==0&&(a.f^=At),Jt(a,d)),l&&(s.update_pending_count(-1),h||v.decrement()),Dn()};if(n.then(_,d=>_(null,d||"unknown")),v)return()=>{queueMicrotask(()=>v.neuter())}}),new Promise(u=>{function f(v){function h(){v===n?u(a):f(n)}v.then(h,h)}f(n)})}function ur(e){const t=sr(e);return ts(t),t}function Ve(e){const t=sr(e);return t.equals=jn,t}function Mn(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ft(t[r])}}function _a(e){for(var t=e.parent;t!==null;){if((t.f&Ie)===0)return t;t=t.parent}return null}function Xr(e){var t,r=B;wt(_a(e));try{Mn(e),t=as(e)}finally{wt(r)}return t}function Ln(e){var t=Xr(e);if(e.equals(t)||(e.v=t,e.wv=ns()),!It){var r=(mt||(e.f&Fe)!==0)&&e.deps!==null?dt:be;Ae(e,r)}}function ga(e,t,r){const s=nr()?sr:Ve;if(t.length===0){r(e.map(s));return}var n=ye,a=B,o=ma(),l=ha();Promise.all(t.map(u=>pa(u))).then(u=>{n?.activate(),o();try{r([...e.map(s),...u])}catch(f){(a.f&$t)===0&&Jr(f,a)}n?.deactivate(),Dn()}).catch(u=>{l.error(u)})}function ma(){var e=B,t=K,r=ae,s=ye;return function(){wt(e),tt(t),pr(r),s?.activate()}}function Dn(){wt(null),tt(null),pr(null)}const Cr=new Set;let ye=null,un=new Set,gr=[];function Fn(){const e=gr.shift();gr.length>0&&queueMicrotask(Fn),e()}let Gt=[],Zr=null,Nr=!1;class Lt{current=new Map;#l=new Map;#s=new Set;#e=0;#c=null;#u=!1;#r=[];#a=[];#n=[];#t=[];#i=[];#f=[];#v=[];skipped_effects=new Set;process(t){Gt=[];for(const n of t)this.#h(n);if(this.#r.length===0&&this.#e===0){this.#d();var r=this.#n,s=this.#t;this.#n=[],this.#t=[],this.#i=[],ye=null,fn(r),fn(s),ye===null?ye=this:Cr.delete(this),this.#c?.resolve()}else this.#o(this.#n),this.#o(this.#t),this.#o(this.#i);for(const n of this.#r)zt(n);for(const n of this.#a)zt(n);this.#r=[],this.#a=[]}#h(t){t.f^=be;for(var r=t.first;r!==null;){var s=r.f,n=(s&(vt|Tt))!==0,a=n&&(s&be)!==0,o=a||(s&Ye)!==0||this.skipped_effects.has(r);if(!o&&r.fn!==null){if(n)r.f^=be;else if((s&Br)!==0)this.#t.push(r);else if((s&be)===0)if((s&Gr)!==0){var l=r.b?.pending?this.#a:this.#r;l.push(r)}else ir(r)&&((r.f&Ct)!==0&&this.#i.push(r),zt(r));var u=r.first;if(u!==null){r=u;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)r=f.next,f=f.parent}}#o(t){for(const r of t)((r.f&We)!==0?this.#f:this.#v).push(r),Ae(r,be);t.length=0}capture(t,r){this.#l.has(t)||this.#l.set(t,r),this.current.set(t,t.v)}activate(){ye=this}deactivate(){ye=null;for(const t of un)if(un.delete(t),t(),ye!==null)break}neuter(){this.#u=!0}flush(){Gt.length>0?ya():this.#d(),ye===this&&(this.#e===0&&Cr.delete(this),this.deactivate())}#d(){if(!this.#u)for(const t of this.#s)t();this.#s.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#f)Ae(t,We),Dt(t);for(const t of this.#v)Ae(t,dt),Dt(t);this.#n=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#s.add(t)}settled(){return(this.#c??=Ps()).promise}static ensure(){if(ye===null){const t=ye=new Lt;Cr.add(ye),Lt.enqueue(()=>{ye===t&&t.flush()})}return ye}static enqueue(t){gr.length===0&&queueMicrotask(Fn),gr.unshift(t)}}function ya(){var e=Mt;Nr=!0;try{var t=0;for(hn(!0);Gt.length>0;){var r=Lt.ensure();if(t++>1e3){var s,n;wa()}r.process(Gt),yt.clear()}}finally{Nr=!1,hn(e),Zr=null}}function wa(){try{Hs()}catch(e){Jr(e,Zr)}}let xt=null;function fn(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var s=e[r++];if((s.f&($t|Ye))===0&&ir(s)&&(xt=[],zt(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Zn(s):s.fn=null),xt?.length>0)){yt.clear();for(const n of xt)zt(n);xt=[]}}xt=null}}function Dt(e){for(var t=Zr=e;t.parent!==null;){t=t.parent;var r=t.f;if(Nr&&t===B&&(r&Ct)!==0)return;if((r&(Tt|vt))!==0){if((r&be)===0)return;t.f^=be}}Gt.push(t)}const yt=new Map;function Kt(e,t){var r={f:0,v:e,reactions:null,equals:Pn,rv:0,wv:0};return r}function _t(e,t){const r=Kt(e);return ts(r),r}function W(e,t=!1,r=!0){const s=Kt(e);return t||(s.equals=jn),Vt&&r&&ae!==null&&ae.l!==null&&(ae.l.s??=[]).push(s),s}function vn(e,t){return b(e,R(()=>i(e))),t}function b(e,t,r=!1){K!==null&&(!et||(K.f&cn)!==0)&&nr()&&(K.f&(Ie|Ct|Gr|cn))!==0&&!ut?.includes(e)&&Bs();let s=r?jt(t):t;return Jt(e,s)}function Jt(e,t){if(!e.equals(t)){var r=e.v;It?yt.set(e,t):yt.set(e,r),e.v=t;var s=Lt.ensure();s.capture(e,r),(e.f&Ie)!==0&&((e.f&We)!==0&&Xr(e),Ae(e,(e.f&Fe)===0?be:dt)),e.wv=ns(),Vn(e,We),nr()&&B!==null&&(B.f&be)!==0&&(B.f&(vt|Tt))===0&&(Le===null?Ta([e]):Le.push(e))}return t}function Tr(e){b(e,e.v+1)}function Vn(e,t){var r=e.reactions;if(r!==null)for(var s=nr(),n=r.length,a=0;a<n;a++){var o=r[a],l=o.f;if(!(!s&&o===B)){var u=(l&We)===0;u&&Ae(o,t),(l&Ie)!==0?Vn(o,dt):u&&((l&Ct)!==0&&xt!==null&&xt.push(o),Dt(o))}}}function jt(e){if(typeof e!="object"||e===null||kt in e)return e;const t=Yr(e);if(t!==Ts&&t!==$s)return e;var r=new Map,s=wr(e),n=_t(0),a=Rt,o=l=>{if(Rt===a)return l();var u=K,f=Rt;tt(null),_n(a);var v=l();return tt(u),_n(f),v};return s&&r.set("length",_t(e.length)),new Proxy(e,{defineProperty(l,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&qs();var v=r.get(u);return v===void 0?v=o(()=>{var h=_t(f.value);return r.set(u,h),h}):b(v,f.value,!0),!0},deleteProperty(l,u){var f=r.get(u);if(f===void 0){if(u in l){const v=o(()=>_t(me));r.set(u,v),Tr(n)}}else b(f,me),Tr(n);return!0},get(l,u,f){if(u===kt)return e;var v=r.get(u),h=u in l;if(v===void 0&&(!h||Nt(l,u)?.writable)&&(v=o(()=>{var d=jt(h?l[u]:me),c=_t(d);return c}),r.set(u,v)),v!==void 0){var _=i(v);return _===me?void 0:_}return Reflect.get(l,u,f)},getOwnPropertyDescriptor(l,u){var f=Reflect.getOwnPropertyDescriptor(l,u);if(f&&"value"in f){var v=r.get(u);v&&(f.value=i(v))}else if(f===void 0){var h=r.get(u),_=h?.v;if(h!==void 0&&_!==me)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return f},has(l,u){if(u===kt)return!0;var f=r.get(u),v=f!==void 0&&f.v!==me||Reflect.has(l,u);if(f!==void 0||B!==null&&(!v||Nt(l,u)?.writable)){f===void 0&&(f=o(()=>{var _=v?jt(l[u]):me,d=_t(_);return d}),r.set(u,f));var h=i(f);if(h===me)return!1}return v},set(l,u,f,v){var h=r.get(u),_=u in l;if(s&&u==="length")for(var d=f;d<h.v;d+=1){var c=r.get(d+"");c!==void 0?b(c,me):d in l&&(c=o(()=>_t(me)),r.set(d+"",c))}if(h===void 0)(!_||Nt(l,u)?.writable)&&(h=o(()=>_t(void 0)),b(h,jt(f)),r.set(u,h));else{_=h.v!==me;var m=o(()=>jt(f));b(h,m)}var S=Reflect.getOwnPropertyDescriptor(l,u);if(S?.set&&S.set.call(v,f),!_){if(s&&typeof u=="string"){var E=r.get("length"),O=Number(u);Number.isInteger(O)&&O>=E.v&&b(E,O+1)}Tr(n)}return!0},ownKeys(l){i(n);var u=Reflect.ownKeys(l).filter(h=>{var _=r.get(h);return _===void 0||_.v!==me});for(var[f,v]of r)v.v!==me&&!(f in l)&&u.push(f);return u},setPrototypeOf(){Ys()}})}var dn,Wn,Hn,Un;function ba(){if(dn===void 0){dn=window,Wn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Hn=Nt(t,"firstChild").get,Un=Nt(t,"nextSibling").get,ln(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ln(r)&&(r.__t=void 0)}}function Ut(e=""){return document.createTextNode(e)}function Ft(e){return Hn.call(e)}function Rr(e){return Un.call(e)}function p(e,t){return Ft(e)}function gt(e,t){{var r=Ft(e);return r instanceof Comment&&r.data===""?Rr(r):r}}function g(e,t=1,r=!1){let s=e;for(;t--;)s=Rr(s);return s}function Sa(e){e.textContent=""}function qn(){return!1}function ar(e){var t=K,r=B;tt(null),wt(null);try{return e()}finally{tt(t),wt(r)}}function Yn(e){B===null&&K===null&&Ws(),K!==null&&(K.f&Fe)!==0&&B===null&&Vs(),It&&Fs()}function xa(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function rt(e,t,r,s=!0){var n=B;n!==null&&(n.f&Ye)!==0&&(e|=Ye);var a={ctx:ae,deps:null,nodes_start:null,nodes_end:null,f:e|We,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{zt(a),a.f|=Sr}catch(u){throw ft(a),u}else t!==null&&Dt(a);if(s){var o=a;if(r&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&rr)===0&&(o=o.first),o!==null&&(o.parent=n,n!==null&&xa(o,n),K!==null&&(K.f&Ie)!==0&&(e&Tt)===0)){var l=K;(l.effects??=[]).push(o)}}return a}function Ea(e){const t=rt(br,null,!1);return Ae(t,be),t.teardown=e,t}function Mr(e){Yn();var t=B.f,r=!K&&(t&vt)!==0&&(t&Sr)===0;if(r){var s=ae;(s.e??=[]).push(e)}else return Bn(e)}function Bn(e){return rt(Br|$n,e,!1)}function Aa(e){return Yn(),rt(br|$n,e,!0)}function ka(e){Lt.ensure();const t=rt(Tt|rr,e,!0);return(r={})=>new Promise(s=>{r.outro?en(t,()=>{ft(t),s(void 0)}):(ft(t),s(void 0))})}function Gn(e){return rt(Br,e,!1)}function de(e,t){var r=ae,s={effect:null,ran:!1,deps:e};r.l.$.push(s),s.effect=Qr(()=>{e(),!s.ran&&(s.ran=!0,R(t))})}function zr(){var e=ae;Qr(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&be)!==0&&Ae(r,dt),ir(r)&&zt(r),t.ran=!1}})}function Ra(e){return rt(Gr|rr,e,!0)}function Qr(e,t=0){return rt(br|t,e,!0)}function Y(e,t=[],r=[]){ga(t,r,s=>{rt(br,()=>e(...s.map(i)),!0)})}function Kn(e,t=0){var r=rt(Ct|t,e,!0);return r}function Xt(e,t=!0){return rt(vt|rr,e,!0,t)}function Jn(e){var t=e.teardown;if(t!==null){const r=It,s=K;pn(!0),tt(null);try{t.call(null)}finally{pn(r),tt(s)}}}function Xn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const n=r.ac;n!==null&&ar(()=>{n.abort(Kr)});var s=r.next;(r.f&Tt)!==0?r.parent=null:ft(r,t),r=s}}function za(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&vt)===0&&ft(t),t=r}}function ft(e,t=!0){var r=!1;(t||(e.f&js)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Ca(e.nodes_start,e.nodes_end),r=!0),Xn(e,t&&!r),mr(e,0),Ae(e,$t);var s=e.transitions;if(s!==null)for(const a of s)a.stop();Jn(e);var n=e.parent;n!==null&&n.first!==null&&Zn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ca(e,t){for(;e!==null;){var r=e===t?null:Rr(e);e.remove(),e=r}}function Zn(e){var t=e.parent,r=e.prev,s=e.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=r))}function en(e,t){var r=[];tn(e,r,!0),Qn(r,()=>{ft(e),t&&t()})}function Qn(e,t){var r=e.length;if(r>0){var s=()=>--r||t();for(var n of e)n.out(s)}else t()}function tn(e,t,r){if((e.f&Ye)===0){if(e.f^=Ye,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var s=e.first;s!==null;){var n=s.next,a=(s.f&xr)!==0||(s.f&vt)!==0;tn(s,t,a?r:!1),s=n}}}function rn(e){es(e,!0)}function es(e,t){if((e.f&Ye)!==0){e.f^=Ye,(e.f&be)===0&&(Ae(e,We),Dt(e));for(var r=e.first;r!==null;){var s=r.next,n=(r.f&xr)!==0||(r.f&vt)!==0;es(r,n?t:!1),r=s}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Mt=!1;function hn(e){Mt=e}let It=!1;function pn(e){It=e}let K=null,et=!1;function tt(e){K=e}let B=null;function wt(e){B=e}let ut=null;function ts(e){K!==null&&(ut===null?ut=[e]:ut.push(e))}let Ee=null,$e=0,Le=null;function Ta(e){Le=e}let rs=1,Zt=0,Rt=Zt;function _n(e){Rt=e}let mt=!1;function ns(){return++rs}function ir(e){var t=e.f;if((t&We)!==0)return!0;if((t&dt)!==0){var r=e.deps,s=(t&Fe)!==0;if(r!==null){var n,a,o=(t&hr)!==0,l=s&&B!==null&&!mt,u=r.length;if((o||l)&&(B===null||(B.f&$t)===0)){var f=e,v=f.parent;for(n=0;n<u;n++)a=r[n],(o||!a?.reactions?.includes(f))&&(a.reactions??=[]).push(f);o&&(f.f^=hr),l&&v!==null&&(v.f&Fe)===0&&(f.f^=Fe)}for(n=0;n<u;n++)if(a=r[n],ir(a)&&Ln(a),a.wv>e.wv)return!0}(!s||B!==null&&!mt)&&Ae(e,be)}return!1}function ss(e,t,r=!0){var s=e.reactions;if(s!==null&&!ut?.includes(e))for(var n=0;n<s.length;n++){var a=s[n];(a.f&Ie)!==0?ss(a,t,!1):t===a&&(r?Ae(a,We):(a.f&be)!==0&&Ae(a,dt),Dt(a))}}function as(e){var t=Ee,r=$e,s=Le,n=K,a=mt,o=ut,l=ae,u=et,f=Rt,v=e.f;Ee=null,$e=0,Le=null,mt=(v&Fe)!==0&&(et||!Mt||K===null),K=(v&(vt|Tt))===0?e:null,ut=null,pr(e.ctx),et=!1,Rt=++Zt,e.ac!==null&&(ar(()=>{e.ac.abort(Kr)}),e.ac=null);try{e.f|=jr;var h=e.fn,_=h(),d=e.deps;if(Ee!==null){var c;if(mr(e,$e),d!==null&&$e>0)for(d.length=$e+Ee.length,c=0;c<Ee.length;c++)d[$e+c]=Ee[c];else e.deps=d=Ee;if(!mt||(v&Ie)!==0&&e.reactions!==null)for(c=$e;c<d.length;c++)(d[c].reactions??=[]).push(e)}else d!==null&&$e<d.length&&(mr(e,$e),d.length=$e);if(nr()&&Le!==null&&!et&&d!==null&&(e.f&(Ie|dt|We))===0)for(c=0;c<Le.length;c++)ss(Le[c],e);return n!==null&&n!==e&&(Zt++,Le!==null&&(s===null?s=Le:s.push(...Le))),(e.f&At)!==0&&(e.f^=At),_}catch(m){return va(m)}finally{e.f^=jr,Ee=t,$e=r,Le=s,K=n,mt=a,ut=o,pr(l),et=u,Rt=f}}function $a(e,t){let r=t.reactions;if(r!==null){var s=Cs.call(r,e);if(s!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[s]=r[n],r.pop())}}r===null&&(t.f&Ie)!==0&&(Ee===null||!Ee.includes(t))&&(Ae(t,dt),(t.f&(Fe|hr))===0&&(t.f^=hr),Mn(t),mr(t,0))}function mr(e,t){var r=e.deps;if(r!==null)for(var s=t;s<r.length;s++)$a(e,r[s])}function zt(e){var t=e.f;if((t&$t)===0){Ae(e,be);var r=B,s=Mt;B=e,Mt=!0;try{(t&Ct)!==0?za(e):Xn(e),Jn(e);var n=as(e);e.teardown=typeof n=="function"?n:null,e.wv=rs;var a;zn&&ca&&(e.f&We)!==0&&e.deps}finally{Mt=s,B=r}}}function i(e){var t=e.f,r=(t&Ie)!==0;if(K!==null&&!et){var s=B!==null&&(B.f&$t)!==0;if(!s&&!ut?.includes(e)){var n=K.deps;if((K.f&jr)!==0)e.rv<Zt&&(e.rv=Zt,Ee===null&&n!==null&&n[$e]===e?$e++:Ee===null?Ee=[e]:(!mt||!Ee.includes(e))&&Ee.push(e));else{(K.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[K]:a.includes(K)||a.push(K)}}}else if(r&&e.deps===null&&e.effects===null){var o=e,l=o.parent;l!==null&&(l.f&Fe)===0&&(o.f^=Fe)}if(It){if(yt.has(e))return yt.get(e);if(r){o=e;var u=o.v;return((o.f&be)===0&&o.reactions!==null||is(o))&&(u=Xr(o)),yt.set(o,u),u}}else r&&(o=e,ir(o)&&Ln(o));if((e.f&At)!==0)throw e.v;return e.v}function is(e){if(e.v===me)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(yt.has(t)||(t.f&Ie)!==0&&is(t))return!0;return!1}function R(e){var t=et;try{return et=!0,e()}finally{et=t}}const Ia=-7169;function Ae(e,t){e.f=e.f&Ia|t}function V(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(kt in e)Lr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&kt in r&&Lr(r)}}}function Lr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Lr(e[s],t)}catch{}const r=Yr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Cn(r);for(let n in s){const a=s[n].get;if(a)try{a.call(e)}catch{}}}}}const Oa=["touchstart","touchmove"];function Pa(e){return Oa.includes(e)}const ja=new Set,gn=new Set;function Na(e,t,r,s={}){function n(a){if(s.capture||Yt.call(t,a),!a.cancelBubble)return ar(()=>r?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?kr(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function ue(e,t,r,s,n){var a={capture:s,passive:n},o=Na(e,t,r,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ea(()=>{t.removeEventListener(e,o,a)})}let mn=null;function Yt(e){var t=this,r=t.ownerDocument,s=e.type,n=e.composedPath?.()||[],a=n[0]||e.target;mn=e;var o=0,l=mn===e&&e.__root;if(l){var u=n.indexOf(l);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var f=n.indexOf(t);if(f===-1)return;u<=f&&(o=u)}if(a=n[o]||e.target,a!==t){Or(e,"currentTarget",{configurable:!0,get(){return a||r}});var v=K,h=B;tt(null),wt(null);try{for(var _,d=[];a!==null;){var c=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+s];if(m!=null&&(!a.disabled||e.target===a))if(wr(m)){var[S,...E]=m;S.apply(a,[e,...E])}else m.call(a,e)}catch(O){_?d.push(O):_=O}if(e.cancelBubble||c===t||c===null)break;a=c}if(_){for(let O of d)queueMicrotask(()=>{throw O});throw _}}finally{e.__root=t,delete e.currentTarget,tt(v),wt(h)}}}function os(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Qt(e,t){var r=B;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function L(e,t){var r=(t&sa)!==0,s=(t&aa)!==0,n,a=!e.startsWith("<!>");return()=>{n===void 0&&(n=os(a?e:"<!>"+e),r||(n=Ft(n)));var o=s||Wn?document.importNode(n,!0):n.cloneNode(!0);if(r){var l=Ft(o),u=o.lastChild;Qt(l,u)}else Qt(o,o);return o}}function Ma(e,t,r="svg"){var s=!e.startsWith("<!>"),n=`<${r}>${s?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var o=os(n),l=Ft(o);a=Ft(l)}var u=a.cloneNode(!0);return Qt(u,u),u}}function or(e,t){return Ma(e,t,"svg")}function $r(e=""){{var t=Ut(e+"");return Qt(t,t),t}}function er(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ut();return e.append(t,r),Qt(t,r),e}function C(e,t){e!==null&&e.before(t)}let Dr=!0;function M(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function La(e,t){return Da(e,t)}const Ot=new Map;function Da(e,{target:t,anchor:r,props:s={},events:n,context:a,intro:o=!0}){ba();var l=new Set,u=h=>{for(var _=0;_<h.length;_++){var d=h[_];if(!l.has(d)){l.add(d);var c=Pa(d);t.addEventListener(d,Yt,{passive:c});var m=Ot.get(d);m===void 0?(document.addEventListener(d,Yt,{passive:c}),Ot.set(d,1)):Ot.set(d,m+1)}}};u(qr(ja)),gn.add(u);var f=void 0,v=ka(()=>{var h=r??t.appendChild(Ut());return Xt(()=>{if(a){Wt({});var _=ae;_.c=a}n&&(s.$$events=n),Dr=o,f=e(h,s)||{},Dr=!0,a&&Ht()}),()=>{for(var _ of l){t.removeEventListener(_,Yt);var d=Ot.get(_);--d===0?(document.removeEventListener(_,Yt),Ot.delete(_)):Ot.set(_,d)}gn.delete(u),h!==r&&h.parentNode?.removeChild(h)}});return Fa.set(f,v),f}let Fa=new WeakMap;function q(e,t,r=!1){var s=e,n=null,a=null,o=me,l=r?xr:0,u=!1;const f=(d,c=!0)=>{u=!0,_(c,d)};var v=null;function h(){v!==null&&(v.lastChild.remove(),s.before(v),v=null);var d=o?n:a,c=o?a:n;d&&rn(d),c&&en(c,()=>{o?a=null:n=null})}const _=(d,c)=>{if(o!==(o=d)){var m=qn(),S=s;if(m&&(v=document.createDocumentFragment(),v.append(S=Ut())),o?n??=c&&Xt(()=>c(S)):a??=c&&Xt(()=>c(S)),m){var E=ye,O=o?n:a,I=o?a:n;O&&E.skipped_effects.delete(O),I&&E.skipped_effects.add(I),E.add_callback(h)}else h()}};Kn(()=>{u=!1,t(f),u||_(null,null)},l)}function we(e,t){return t}function Va(e,t,r){for(var s=e.items,n=[],a=t.length,o=0;o<a;o++)tn(t[o].e,n,!0);var l=a>0&&n.length===0&&r!==null;if(l){var u=r.parentNode;Sa(u),u.append(r),s.clear(),Qe(e,t[0].prev,t[a-1].next)}Qn(n,()=>{for(var f=0;f<a;f++){var v=t[f];l||(s.delete(v.k),Qe(e,v.prev,v.next)),ft(v.e,!l)}})}function fe(e,t,r,s,n,a=null){var o=e,l={flags:t,items:new Map,first:null},u=(t&On)!==0;if(u){var f=e;o=f.appendChild(Ut())}var v=null,h=!1,_=new Map,d=Ve(()=>{var E=r();return wr(E)?E:E==null?[]:qr(E)}),c,m;function S(){Wa(m,c,l,_,o,n,t,s,r),a!==null&&(c.length===0?v?rn(v):v=Xt(()=>a(o)):v!==null&&en(v,()=>{v=null}))}Kn(()=>{m??=B,c=i(d);var E=c.length;if(!(h&&E===0)){h=E===0;var O,I,T,j;if(qn()){var $=new Set,x=ye;for(I=0;I<E;I+=1){T=c[I],j=s(T,I);var te=l.items.get(j)??_.get(j);te?(t&(Er|Ar))!==0&&ls(te,T,I,t):(O=cs(null,l,null,null,T,j,I,n,t,r,!0),_.set(j,O)),$.add(j)}for(const[ce,ke]of l.items)$.has(ce)||x.skipped_effects.add(ke.e);x.add_callback(S)}else S();i(d)}})}function Wa(e,t,r,s,n,a,o,l,u){var f=(o&Gs)!==0,v=(o&(Er|Ar))!==0,h=t.length,_=r.items,d=r.first,c=d,m,S=null,E,O=[],I=[],T,j,$,x;if(f)for(x=0;x<h;x+=1)T=t[x],j=l(T,x),$=_.get(j),$!==void 0&&($.a?.measure(),(E??=new Set).add($));for(x=0;x<h;x+=1){if(T=t[x],j=l(T,x),$=_.get(j),$===void 0){var te=s.get(j);if(te!==void 0){s.delete(j),_.set(j,te);var ce=S?S.next:c;Qe(r,S,te),Qe(r,te,ce),Ir(te,ce,n),S=te}else{var ke=c?c.e.nodes_start:n;S=cs(ke,r,S,S===null?r.first:S.next,T,j,x,a,o,u)}_.set(j,S),O=[],I=[],c=S.next;continue}if(v&&ls($,T,x,o),($.e.f&Ye)!==0&&(rn($.e),f&&($.a?.unfix(),(E??=new Set).delete($))),$!==c){if(m!==void 0&&m.has($)){if(O.length<I.length){var P=I[0],y;S=P.prev;var z=O[0],U=O[O.length-1];for(y=0;y<O.length;y+=1)Ir(O[y],P,n);for(y=0;y<I.length;y+=1)m.delete(I[y]);Qe(r,z.prev,U.next),Qe(r,S,z),Qe(r,U,P),c=P,S=U,x-=1,O=[],I=[]}else m.delete($),Ir($,c,n),Qe(r,$.prev,$.next),Qe(r,$,S===null?r.first:S.next),Qe(r,S,$),S=$;continue}for(O=[],I=[];c!==null&&c.k!==j;)(c.e.f&Ye)===0&&(m??=new Set).add(c),I.push(c),c=c.next;if(c===null)continue;$=c}O.push($),S=$,c=$.next}if(c!==null||m!==void 0){for(var Q=m===void 0?[]:qr(m);c!==null;)(c.e.f&Ye)===0&&Q.push(c),c=c.next;var w=Q.length;if(w>0){var D=(o&On)!==0&&h===0?n:null;if(f){for(x=0;x<w;x+=1)Q[x].a?.measure();for(x=0;x<w;x+=1)Q[x].a?.fix()}Va(r,Q,D)}}f&&kr(()=>{if(E!==void 0)for($ of E)$.a?.apply()}),e.first=r.first&&r.first.e,e.last=S&&S.e;for(var F of s.values())ft(F.e);s.clear()}function ls(e,t,r,s){(s&Er)!==0&&Jt(e.v,t),(s&Ar)!==0?Jt(e.i,r):e.i=r}function cs(e,t,r,s,n,a,o,l,u,f,v){var h=(u&Er)!==0,_=(u&Ks)===0,d=h?_?W(n,!1,!1):Kt(n):n,c=(u&Ar)===0?o:Kt(o),m={i:c,v:d,k:a,a:null,e:null,prev:r,next:s};try{if(e===null){var S=document.createDocumentFragment();S.append(e=Ut())}return m.e=Xt(()=>l(e,d,c,f),oa),m.e.prev=r&&r.e,m.e.next=s&&s.e,r===null?v||(t.first=m):(r.next=m,r.e.next=m.e),s!==null&&(s.prev=m,s.e.prev=m.e),m}finally{}}function Ir(e,t,r){for(var s=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==s;){var o=Rr(a);n.before(a),a=o}}function Qe(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}const yn=[...` 	
\r\f \v\uFEFF`];function Ha(e,t,r){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),r){for(var n in r)if(r[n])s=s?s+" "+n:n;else if(s.length)for(var a=n.length,o=0;(o=s.indexOf(n,o))>=0;){var l=o+a;(o===0||yn.includes(s[o-1]))&&(l===s.length||yn.includes(s[l]))?s=(o===0?"":s.substring(0,o))+s.substring(l+1):o=l}}return s===""?null:s}function Ua(e,t){return e==null?null:String(e)}function De(e,t,r,s,n,a){var o=e.__className;if(o!==r||o===void 0){var l=Ha(r,s,a);l==null?e.removeAttribute("class"):t?e.className=l:e.setAttribute("class",l),e.__className=r}else if(a&&n!==a)for(var u in a){var f=!!a[u];(n==null||f!==!!n[u])&&e.classList.toggle(u,f)}return a}function tr(e,t,r,s){var n=e.__style;if(n!==t){var a=Ua(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return s}const qa=Symbol("is custom element"),Ya=Symbol("is html");function Ba(e,t){var r=us(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function H(e,t,r,s){var n=us(e);n[t]!==(n[t]=r)&&(t==="loading"&&(e[Ms]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Ga(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function us(e){return e.__attributes??={[qa]:e.nodeName.includes("-"),[Ya]:e.namespaceURI===ia}}var wn=new Map;function Ga(e){var t=e.getAttribute("is")||e.nodeName,r=wn.get(t);if(r)return r;wn.set(t,r=[]);for(var s,n=e,a=Element.prototype;a!==n;){s=Cn(n);for(var o in s)s[o].set&&r.push(o);n=Yr(n)}return r}const Ka=()=>performance.now(),ct={tick:e=>requestAnimationFrame(e),now:()=>Ka(),tasks:new Set};function fs(){const e=ct.now();ct.tasks.forEach(t=>{t.c(e)||(ct.tasks.delete(t),t.f())}),ct.tasks.size!==0&&ct.tick(fs)}function Ja(e){let t;return ct.tasks.size===0&&ct.tick(fs),{promise:new Promise(r=>{ct.tasks.add(t={c:e,f:r})}),abort(){ct.tasks.delete(t)}}}function fr(e,t){ar(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xa(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function bn(e){const t={},r=e.split(";");for(const s of r){const[n,a]=s.split(":");if(!n||a===void 0)break;const o=Xa(n.trim());t[o]=a.trim()}return t}const Za=e=>e;function Fr(e,t,r,s){var n=(e&ta)!==0,a=(e&ra)!==0,o=n&&a,l=(e&na)!==0,u=o?"both":n?"in":"out",f,v=t.inert,h=t.style.overflow,_,d;function c(){return ar(()=>f??=r()(t,s?.()??{},{direction:u}))}var m={is_global:l,in(){if(t.inert=v,!n){d?.abort(),d?.reset?.();return}a||_?.abort(),fr(t,"introstart"),_=Vr(t,c(),d,1,()=>{fr(t,"introend"),_?.abort(),_=f=void 0,t.style.overflow=h})},out(I){if(!a){I?.(),f=void 0;return}t.inert=!0,fr(t,"outrostart"),d=Vr(t,c(),_,0,()=>{fr(t,"outroend"),I?.()})},stop:()=>{_?.abort(),d?.abort()}},S=B;if((S.transitions??=[]).push(m),n&&Dr){var E=l;if(!E){for(var O=S.parent;O&&(O.f&xr)!==0;)for(;(O=O.parent)&&(O.f&Ct)===0;);E=!O||(O.f&Sr)!==0}E&&Gn(()=>{R(()=>m.in())})}}function Vr(e,t,r,s,n){var a=s===1;if(Is(t)){var o,l=!1;return kr(()=>{if(!l){var S=t({direction:a?"in":"out"});o=Vr(e,S,r,s,n)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(r?.deactivate(),!t?.duration)return n(),{abort:qt,deactivate:qt,reset:qt,t:()=>s};const{delay:u=0,css:f,tick:v,easing:h=Za}=t;var _=[];if(a&&r===void 0&&(v&&v(0,1),f)){var d=bn(f(0,1));_.push(d,d)}var c=()=>1-s,m=e.animate(_,{duration:u,fill:"forwards"});return m.onfinish=()=>{m.cancel();var S=r?.t()??1-s;r?.abort();var E=s-S,O=t.duration*Math.abs(E),I=[];if(O>0){var T=!1;if(f)for(var j=Math.ceil(O/16.666666666666668),$=0;$<=j;$+=1){var x=S+E*h($/j),te=bn(f(x,1-x));I.push(te),T||=te.overflow==="hidden"}T&&(e.style.overflow="hidden"),c=()=>{var ce=m.currentTime;return S+E*h(ce/O)},v&&Ja(()=>{if(m.playState!=="running")return!1;var ce=c();return v(ce,1-ce),!0})}m=e.animate(I,{duration:O,fill:"forwards"}),m.onfinish=()=>{c=()=>s,v?.(s,1-s),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=qt)},deactivate:()=>{n=qt},reset:()=>{s===0&&v?.(1,0)},t:()=>c()}}function Sn(e,t){return e===t||e?.[kt]===t}function nn(e={},t,r,s){return Gn(()=>{var n,a;return Qr(()=>{n=a,a=[],R(()=>{e!==r(...a)&&(t(e,...a),n&&Sn(r(...n),e)&&t(null,...n))})}),()=>{kr(()=>{a&&Sn(r(...a),e)&&t(null,...a)})}}),e}function lr(e=!1){const t=ae,r=t.l.u;if(!r)return;let s=()=>V(t.s);if(e){let n=0,a={};const o=sr(()=>{let l=!1;const u=t.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],l=!0);return l&&n++,n});s=()=>i(o)}r.b.length&&Aa(()=>{xn(t,s),Pr(r.b)}),Mr(()=>{const n=R(()=>r.m.map(Os));return()=>{for(const a of n)typeof a=="function"&&a()}}),r.a.length&&Mr(()=>{xn(t,s),Pr(r.a)})}function xn(e,t){if(e.l.s)for(const r of e.l.s)i(r);t()}let vr=!1;function Qa(e){var t=vr;try{return vr=!1,[e(),vr]}finally{vr=t}}function ve(e,t,r,s){var n=!Vt||(r&Xs)!==0,a=(r&Qs)!==0,o=(r&ea)!==0,l=s,u=!0,f=()=>(u&&(u=!1,l=o?R(s):s),l),v;if(a){var h=kt in e||Ns in e;v=Nt(e,t)?.set??(h&&t in e?I=>e[t]=I:void 0)}var _,d=!1;a?[_,d]=Qa(()=>e[t]):_=e[t],_===void 0&&s!==void 0&&(_=f(),v&&(n&&Us(),v(_)));var c;if(n?c=()=>{var I=e[t];return I===void 0?f():(u=!0,I)}:c=()=>{var I=e[t];return I!==void 0&&(l=void 0),I===void 0?l:I},n&&(r&Zs)===0)return c;if(v){var m=e.$$legacy;return(function(I,T){return arguments.length>0?((!n||!T||m||d)&&v(T?c():I),I):c()})}var S=!1,E=((r&Js)!==0?sr:Ve)(()=>(S=!1,c()));a&&i(E);var O=B;return(function(I,T){if(arguments.length>0){const j=T?i(E):n&&a?jt(I):I;return b(E,j),S=!0,l!==void 0&&(l=j),I}return It&&S||(O.f&$t)!==0?E.v:i(E)})}function sn(e){ae===null&&In(),Vt&&ae.l!==null?ri(ae).m.push(e):Mr(()=>{const t=R(e);if(typeof t=="function")return t})}function ei(e,t,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:s})}function ti(){const e=ae;return e===null&&In(),(t,r,s)=>{const n=e.s.$$events?.[t];if(n){const a=wr(n)?n.slice():[n],o=ei(t,r,s);for(const l of a)l.call(e.x,o);return!o.defaultPrevented}return!0}}function ri(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const ni="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ni);ua();const Pt={明るい:{bright:1,heavy:0,soft:0,sharp:0,light:1},暗い:{bright:-1,heavy:0,soft:0,sharp:0,light:-1},重い:{bright:-1,heavy:1,soft:0,sharp:0,light:-1},軽快:{bright:1,heavy:-1,soft:0,sharp:1,light:1},重厚:{bright:0,heavy:1,soft:0,sharp:0,light:-1},柔らかい:{bright:0,heavy:0,soft:1,sharp:-1,light:0},硬い:{bright:0,heavy:1,soft:-1,sharp:1,light:0},鋭い:{bright:1,heavy:0,soft:-1,sharp:1,light:1},鈍い:{bright:-1,heavy:1,soft:1,sharp:-1,light:-1},切れ味:{bright:1,heavy:0,soft:-1,sharp:1,light:1},軽やか:{bright:1,heavy:-1,soft:0,sharp:0,light:1},薄い:{bright:0,heavy:-1,soft:0,sharp:0,light:1},風のような:{bright:1,heavy:-1,soft:1,sharp:0,light:1},力強い:{bright:0,heavy:1,soft:-1,sharp:0,light:-1},優雅:{bright:1,heavy:0,soft:1,sharp:0,light:1},繊細:{bright:1,heavy:-1,soft:1,sharp:1,light:1},安定:{bright:0,heavy:1,soft:0,sharp:-1,light:-1},親しみやすい:{bright:1,heavy:0,soft:1,sharp:0,light:0},穏やか:{bright:0,heavy:0,soft:1,sharp:-1,light:0},濁った:{bright:-1,heavy:1,soft:0,sharp:-1,light:-1},ざらついた:{bright:-1,heavy:1,soft:-1,sharp:0,light:-1},明確:{bright:1,heavy:0,soft:0,sharp:1,light:1}};function En(e){const t={bright:0,heavy:0,soft:0,sharp:0,light:0};let r=0,s=0;for(const l of Object.values(e))for(const u of l)r++,Pt[u]&&(s++,t.bright+=Pt[u].bright||0,t.heavy+=Pt[u].heavy||0,t.soft+=Pt[u].soft||0,t.sharp+=Pt[u].sharp||0,t.light+=Pt[u].light||0);const n=r>0?s/r:0,a=s;return{scores:{bright:a>0?t.bright/a:0,heavy:a>0?t.heavy/a:0,soft:a>0?t.soft/a:0,sharp:a>0?t.sharp/a:0,light:a>0?t.light/a:0},rawScores:t,confidence:n,totalWords:r,matchedWords:s}}function si(e){const t=[];if(Math.abs(e.bright)>=1&&t.push(e.bright>0?"明るく":"暗く"),Math.abs(e.heavy)>=1&&t.push(e.heavy>0?"重厚で":"軽やかで"),Math.abs(e.soft)>=1&&t.push(e.soft>0?"柔らかい":"硬い"),Math.abs(e.sharp)>=1&&t.push(e.sharp>0?"鋭い":"鈍い"),Math.abs(e.light)>=1&&t.push(e.light>0?"軽快な":"重い"),t.length===0)return"バランスの取れた中性的な印象です";if(t.length===1)return`${t[0]}印象です`;{const s=t.pop();return`${t.join("、")}、${s}印象です`}}function Bt(e){const t={あ:"a",い:"i",う:"u",え:"e",お:"o",ア:"a",イ:"i",ウ:"u",エ:"e",オ:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",カ:"ka",キ:"ki",ク:"ku",ケ:"ke",コ:"ko",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ガ:"ga",ギ:"gi",グ:"gu",ゲ:"ge",ゴ:"go",さ:"sa",し:"si",す:"su",せ:"se",そ:"so",サ:"sa",シ:"si",ス:"su",セ:"se",ソ:"so",ざ:"za",じ:"zi",ず:"zu",ぜ:"ze",ぞ:"zo",ザ:"za",ジ:"zi",ズ:"zu",ゼ:"ze",ゾ:"zo",た:"ta",ち:"ti",つ:"tu",て:"te",と:"to",タ:"ta",チ:"ti",ツ:"tu",テ:"te",ト:"to",だ:"da",ぢ:"di",づ:"du",で:"de",ど:"do",ダ:"da",ヂ:"di",ヅ:"du",デ:"de",ド:"do",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",ナ:"na",ニ:"ni",ヌ:"nu",ネ:"ne",ノ:"no",は:"ha",ひ:"hi",ふ:"hu",へ:"he",ほ:"ho",ハ:"ha",ヒ:"hi",フ:"hu",ヘ:"he",ホ:"ho",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",バ:"ba",ビ:"bi",ブ:"bu",ベ:"be",ボ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",パ:"pa",ピ:"pi",プ:"pu",ペ:"pe",ポ:"po",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",マ:"ma",ミ:"mi",ム:"mu",メ:"me",モ:"mo",や:"ya",ゆ:"yu",よ:"yo",ヤ:"ya",ユ:"yu",ヨ:"yo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",ラ:"ra",リ:"ri",ル:"ru",レ:"re",ロ:"ro",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",ワ:"wa",ヰ:"wi",ヱ:"we",ヲ:"wo",ン:"n",きゃ:"kya",きゅ:"kyu",きょ:"kyo",キャ:"kya",キュ:"kyu",キョ:"kyo",しゃ:"sya",しゅ:"syu",しょ:"syo",シャ:"sya",シュ:"syu",ショ:"syo",ちゃ:"tya",ちゅ:"tyu",ちょ:"tyo",チャ:"tya",チュ:"tyu",チョ:"tyo",にゃ:"nya",にゅ:"nyu",にょ:"nyo",ニャ:"nya",ニュ:"nyu",ニョ:"nyo",ひゃ:"hya",ひゅ:"hyu",ひょ:"hyo",ヒャ:"hya",ヒュ:"hyu",ヒョ:"hyo",みゃ:"mya",みゅ:"myu",みょ:"myo",ミャ:"mya",ミュ:"myu",ミョ:"myo",りゃ:"rya",りゅ:"ryu",りょ:"ryo",リャ:"rya",リュ:"ryu",リョ:"ryo",ぎゃ:"gya",ぎゅ:"gyu",ぎょ:"gyo",ギャ:"gya",ギュ:"gyu",ギョ:"gyo",じゃ:"zya",じゅ:"zyu",じょ:"zyo",ジャ:"zya",ジュ:"zyu",ジョ:"zyo",びゃ:"bya",びゅ:"byu",びょ:"byo",ビャ:"bya",ビュ:"byu",ビョ:"byo",ぴゃ:"pya",ぴゅ:"pyu",ぴょ:"pyo",ピャ:"pya",ピュ:"pyu",ピョ:"pyo",ゃ:"ya",ゅ:"yu",ょ:"yo",ャ:"ya",ュ:"yu",ョ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o",ァ:"a",ィ:"i",ゥ:"u",ェ:"e",ォ:"o",っ:"tu",ッ:"tu",ー:"ー"};let r="";for(let s=0;s<e.length;s++){if(s<e.length-1){const a=e.slice(s,s+2);if(t[a]){r+=t[a],s++;continue}}const n=e[s];t[n]?r+=t[n]:r+=n}return r}function vs(e,t){const r={consonants:{},vowels:{},special:{}};let s=Bt(e),n="";for(let a=0;a<e.length;a++)if(e[a]==="ー"&&a>0){const l=Bt(e[a-1]).slice(-1);"aiueo".includes(l)?n+=l:n+=Bt(e[a])}else n+=Bt(e[a]);s=n,s=s.replace(/tu(.)/g,"$1$1");for(const a of e)t.phoneme.special[a]&&(r.special[a]||(r.special[a]=[]),r.special[a].push(...t.phoneme.special[a]));for(const a of s)t.phoneme.consonants[a]?(r.consonants[a]||(r.consonants[a]=[]),r.consonants[a].push(...t.phoneme.consonants[a])):t.phoneme.vowels[a]&&(r.vowels[a]||(r.vowels[a]=[]),r.vowels[a].push(...t.phoneme.vowels[a]));return r}class an{constructor(t){this.capacity=t,this.cache=new Map}get(t){if(this.cache.has(t)){const r=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,r),r}}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}const Wr=new an(1e3),Hr=new an(500),Ur=new an(2e3);function ds(e){const t=Ur.get(e);if(t!==void 0)return t;let r=e.trim();return r=r.replace(/[Ａ-Ｚａ-ｚ０-９]/g,s=>String.fromCharCode(s.charCodeAt(0)-65248)),r=r.replace(/[^\u3041-\u3096\u30A1-\u30F6\u30FC\u3063\u3083\u3085\u3087\u308E\u30C1\u30E3\u30E5\u30E7\u30A1\u30A3\u30A5\u30A7\u30A9]/g,""),Ur.set(e,r),r}function hs(e,t){const r=`${e}:${JSON.stringify(t).slice(0,100)}`,s=Wr.get(r);if(s!==void 0)return s;const n=vs(e,t);return Wr.set(r,n),n}function ai(e,t){const r=`${e}:${JSON.stringify(t.scoring||{}).slice(0,100)}`,s=Hr.get(r);if(s!==void 0)return s;const n=fi(e,t);return Hr.set(r,n),n}function ps(){return{phoneme:Wr.size(),scoring:Hr.size(),normalized:Ur.size()}}function ii(e,t){const r=performance.now(),s=e(),n=performance.now();return n-r>100&&console.warn(`Performance warning: ${t} took ${(n-r).toFixed(2)}ms`),s}class dr extends Error{constructor(t,r,s){super(t),this.name="AnalysisError",this.code=r,this.details=s}}function oi(e){return!e||typeof e!="string"?{isValid:!1,error:"入力テキストが無効です。文字列を入力してください。"}:e.trim().length===0?{isValid:!1,error:"空のテキストは分析できません。ひらがな・カタカナを入力してください。"}:e.length>100?{isValid:!1,error:"テキストが長すぎます。100文字以内で入力してください。"}:/^[\u3041-\u3096\u30A1-\u30F6\u30FC\u3063\u3083\u3085\u3087\u308E\u30C1\u30E3\u30E5\u30E7\u30A1\u30A3\u30A5\u30A7\u30A9\s]*$/.test(e)?{isValid:!0}:{isValid:!1,error:"ひらがな・カタカナのみ入力可能です。英数字や漢字は使用できません。"}}function _s(e){if(!e||typeof e!="object")return{isValid:!1,error:"ルールファイルの形式が無効です。"};const t=["phoneme","structure","rhyme","start"];for(const r of t)if(!e[r])return{isValid:!1,error:`ルールファイルに必須セクション '${r}' がありません。`};return!e.phoneme.consonants||!e.phoneme.vowels?{isValid:!1,error:"ルールファイルの音素セクションが不完全です。"}:e.scoring&&(!e.scoring.phoneme||!e.scoring.structure)?{isValid:!1,error:"スコアリングルールの構造が無効です。"}:{isValid:!0}}function An(e,t,r=!1){try{const s=oi(e);if(!s.isValid)throw new dr(s.error||"入力が無効です","INVALID_INPUT",{input:e});const n=_s(t);if(!n.isValid)throw new dr(n.error||"ルールが無効です","INVALID_RULES");return{result:gs(e,t,r)}}catch(s){return s instanceof dr?{error:s}:{error:new dr("システムエラーが発生しました。しばらく時間をおいて再度お試しください。","SYSTEM_ERROR",{originalError:s.message})}}}function li(e){const t=e.trim(),r=t.length,s=r<=2?"短い":r<=4?"中程度":"長い",n=/[かきくけこがぎぐげごたちつてとだぢづでどぱぴぷぺぽばびぶべぼ]/.test(t),a=/[なにぬねのまみむめもやゆよらりるれろわをん]/.test(t),o=/[あいえ]/.test(t),l=[];return n&&l.push("硬い"),a&&l.push("柔らかい"),o&&l.push("明るい"),{summary:l.length>0?`この言葉は${l.join("、")}印象で、${s}響きを持っています。`:`この言葉は${s}響きを持っています。`,details:{length:[s],impression:l,fallback:["簡易分析モード"]}}}function ci(e){return{INVALID_INPUT:"入力内容に問題があります。ひらがな・カタカナで入力してください。",INVALID_RULES:"システムの設定ファイルに問題があります。ページを再読み込みしてください。",SCORING_ERROR:"スコア計算中にエラーが発生しました。基本分析のみ表示されます。",PERFORMANCE_ERROR:"処理に時間がかかりすぎています。短いテキストで再度お試しください。",CACHE_ERROR:"キャッシュの問題が発生しました。ページを再読み込みしてください。",SYSTEM_ERROR:"システムエラーが発生しました。しばらく時間をおいて再度お試しください。"}[e.code]||e.message||"不明なエラーが発生しました。"}function Ze(e,t){if(typeof console<"u"){const s={timestamp:new Date().toISOString(),eventType:e,data:t,cacheStats:ps()};console.log(`[Analysis] ${e}:`,s)}}function ui(){const e={};let t="healthy";const r=performance.now(),s=performance.now()-r;if(e.responseTime=`${s.toFixed(2)}ms`,s>50&&(t="warning",e.performance="Slow response detected"),typeof performance<"u"&&performance.memory){const a=performance.memory;e.memory={used:`${(a.usedJSHeapSize/1024/1024).toFixed(2)}MB`,total:`${(a.totalJSHeapSize/1024/1024).toFixed(2)}MB`,limit:`${(a.jsHeapSizeLimit/1024/1024).toFixed(2)}MB`},a.usedJSHeapSize/a.jsHeapSizeLimit>.8&&(t="warning",e.memoryWarning="High memory usage detected")}const n=ps();return e.cache=n,(n.phoneme>800||n.scoring>400)&&(e.cacheWarning="Cache approaching capacity"),{status:t,details:e}}function fi(e,t){const r=performance.now();if(!t.scoring)throw new Error("Scoring rules not found");const s=ds(e),n=hs(s,t),a=["hardness","softness","brightness","heaviness","sharpness"],o=[];for(const c of a){const m=vi(s,n,t,c);o.push(m)}const l=o.reduce((c,m)=>c+m.score,0),u=o.reduce((c,m)=>c+m.maxScore,0),f=hi(l,u),v=o.reduce((c,m)=>c+m.confidence,0)/o.length,h={};o.forEach(c=>{h[c.category]=c.score/c.maxScore});const d=performance.now()-r;return d>500&&console.warn(`Scoring calculation took ${d}ms, exceeding 500ms target`),{totalScore:l,maxPossibleScore:u,normalizedScore:f,categoryScores:o,confidence:v,breakdown:h}}function vi(e,t,r,s){if(!r.scoring)throw new Error("Scoring rules not found");let n=0,a=0,o=0,l=0;const u=[];for(const[h,_]of Object.entries(t.consonants)){const d=r.scoring.phoneme.consonants[h]?.[s];if(d){const c=_.length;n+=d.score*d.weight*c,a+=d.weight*c,o+=d.weight*c,l+=d.weight*c,u.push(`子音-${h}`)}}for(const[h,_]of Object.entries(t.vowels)){const d=r.scoring.phoneme.vowels[h]?.[s];if(d){const c=_.length;n+=d.score*d.weight*c,a+=d.weight*c,o+=d.weight*c,l+=d.weight*c,u.push(`母音-${h}`)}}const f=di(e,r,s);n+=f.score,a+=f.maxScore,o+=f.confidence,l+=f.weight,u.push(...f.appliedRules);const v=l>0?o/l:0;return{category:s,score:n,maxScore:Math.max(a,1),confidence:Math.min(v,1),appliedRules:u}}function di(e,t,r){if(!t.scoring?.structure)return{score:0,maxScore:0,confidence:0,weight:0,appliedRules:[]};let s=0,n=0,a=0,o=0;const l=[],u=/(.)\1/.test(e);if(/(.)\1\1/.test(e)){const c=t.scoring.structure.repetition.triple_or_more[r];c&&(s+=c.score*c.weight,n+=c.weight,a+=c.weight,o+=c.weight,l.push("repetition-triple"))}else if(u){const c=t.scoring.structure.repetition.double[r];c&&(s+=c.score*c.weight,n+=c.weight,a+=c.weight,o+=c.weight,l.push("repetition-double"))}const v=e.slice(-1);if("あいうえお".includes(v)){const c=t.scoring.structure.ending.vowel[r];c&&(s+=c.score*c.weight,n+=c.weight,a+=c.weight,o+=c.weight,l.push("ending-vowel"))}else if(v==="ん"){const c=t.scoring.structure.ending.n[r];c&&(s+=c.score*c.weight,n+=c.weight,a+=c.weight,o+=c.weight,l.push("ending-n"))}let h;e.length<=2?h="short":e.length<=4?h="medium":h="long";const _=t.scoring.structure.length[h]?.[r];_&&(s+=_.score*_.weight,n+=_.weight,a+=_.weight,o+=_.weight,l.push(`長さ-${h}`));const d=o>0?a/o:0;return{score:s,maxScore:n,confidence:d,weight:o,appliedRules:l}}function hi(e,t){return t===0?0:Math.max(0,Math.min(1,e/t))}function gs(e,t,r=!1){return ii(()=>{const s=ds(e),n={start:[],end:[],length:[],repetition:[]};if(!s)return{summary:"分析対象のテキストがありません。",details:n};const a=hs(s,t),o=Bt(s),l=o[0],u=o[o.length-1];if(t.start.consonants[l]){n.start.push(...t.start.consonants[l]);const c=a.consonants[l];c&&c.length>0&&n.start.push(...c)}if(t.start.vowels[l]){n.start.push(...t.start.vowels[l]);const c=a.vowels[l];c&&c.length>0&&n.start.push(...c)}t.structure.ending[u]&&n.end.push(...t.structure.ending[u]),s.length<=2?n.length.push(...t.structure.length.short):s.length<=4?n.length.push(...t.structure.length.medium):n.length.push(...t.structure.length.long),new Set(s.split("")).size<=s.length/2&&n.repetition.push(...t.structure.repetition.double),Object.keys(n).forEach(c=>{n[c]=[...new Set(n[c])]});const v=[],h={start:"開始音",end:"終了音",length:"長さ",repetition:"繰り返し"};for(const[c,m]of Object.entries(n))if(m.length>0){const S=m.slice(0,2).join("、"),E=h[c]||c;v.push(`${E}は${S}の印象があります`)}const d={summary:v.join("。"),details:n};if(r&&"scoring"in t&&t.scoring)try{const c=ai(s,t),m=c.confidence;return{...d,scoring:c,confidence:m,metadata:{analysisVersion:"2.0.0",timestamp:new Date().toISOString(),rulesVersion:"1.0.0"}}}catch(c){return console.warn("Scoring calculation failed:",c),d}return d},`analyzeWord(${e})`)}function pi(e,t){const r=gs(e,t),s=vs(e,t),n=En(r.details),a={};for(const v of Object.values(s.consonants))for(const h of v)a.phonemes||(a.phonemes=[]),a.phonemes.push(h);for(const v of Object.values(s.vowels))for(const h of v)a.phonemes||(a.phonemes=[]),a.phonemes.push(h);for(const v of Object.values(s.special))for(const h of v)a.phonemes||(a.phonemes=[]),a.phonemes.push(h);const o=En(a),l={bright:n.scores.bright+o.scores.bright,heavy:n.scores.heavy+o.scores.heavy,soft:n.scores.soft+o.scores.soft,sharp:n.scores.sharp+o.scores.sharp,light:n.scores.light+o.scores.light},u=(n.confidence+o.confidence)/2;return{summary:si(l),details:r.details,phonemeAnalysis:s,impressionScores:l,confidence:u}}var _i=L('<button type="button" class="clear-button svelte-r20yry" aria-label="入力をクリア">×</button>'),gi=L('<div class="validation-message svelte-r20yry">ひらがな、カタカナ以外が入力されています</div>'),mi=L('<button type="button" class="sample-button svelte-r20yry"> </button>'),yi=L('<div class="text-input-container svelte-r20yry"><div class="input-wrapper svelte-r20yry"><input type="text" autocomplete="off" spellcheck="false"/> <!></div> <div class="input-meta svelte-r20yry"><div> </div> <!></div> <div class="sample-texts svelte-r20yry"><span class="sample-label svelte-r20yry">サンプル:</span> <!></div> <div class="input-guide svelte-r20yry"><details class="svelte-r20yry"><summary class="svelte-r20yry">入力について</summary> <ul class="svelte-r20yry"><li class="svelte-r20yry">すべての文字が入力可能です</li> <li class="svelte-r20yry"> </li> <li class="svelte-r20yry">入力中は自動的に分析が実行されます</li></ul></details></div></div>');function wi(e,t){Wt(t,!1);const r=W(),s=W(),n=W(),a=W();let o=ve(t,"value",12,""),l=ve(t,"placeholder",8,"テキストを入力してください"),u=ve(t,"debounceMs",8,300),f=ve(t,"maxLength",8,50),v=ve(t,"onInput",8,()=>{}),h=ve(t,"onAnalyze",8,()=>{});ti();let _,d=W(),c="";function m(N){return N.substring(0,f())}function S(N){const G=N.target,ee=G.value,ne=m(ee);ee!==ne&&(G.value=ne),o(ne),v()(o()),clearTimeout(_),o().trim()&&o()!==c&&(_=setTimeout(()=>{c=o(),h()(o())},u()))}function E(N){N.preventDefault();const G=N.clipboardData?.getData("text")||"",ee=m(G),ne=i(d).selectionStart||0,Se=i(d).selectionEnd||0,ie=o().substring(0,ne)+ee+o().substring(Se);o(m(ie)),v()(o()),clearTimeout(_),o().trim()&&o()!==c&&(_=setTimeout(()=>{c=o(),h()(o())},u()))}function O(){o(""),c="",clearTimeout(_),i(d)&&vn(d,i(d).value=""),i(d)?.focus(),v()(o())}const I=["さくら","つばめ","かぜ","ひかり","みどり","そら"];function T(N){o(N),i(d)&&vn(d,i(d).value=N),v()(o()),clearTimeout(_),o()!==c&&(c=o(),h()(o()))}de(()=>V(o()),()=>{b(r,o().length>0)}),de(()=>V(o()),()=>{b(s,o().length>0&&!/^[ぁ-んァ-ヴーゃゅょっ\s]*$/.test(o()))}),de(()=>V(o()),()=>{b(n,o().length)}),de(()=>(V(f()),i(n)),()=>{b(a,f()-i(n))}),zr(),lr();var j=yi(),$=p(j),x=p($);let te;nn(x,N=>b(d,N),()=>i(d));var ce=g(x,2);{var ke=N=>{var G=_i();ue("click",G,O),C(N,G)};q(ce,N=>{o()&&N(ke)})}var P=g($,2),y=p(P);let z;var U=p(y),Q=g(y,2);{var w=N=>{var G=gi();C(N,G)};q(Q,N=>{i(s)&&N(w)})}var D=g(P,2),F=g(p(D),2);fe(F,1,()=>I,we,(N,G)=>{var ee=mi(),ne=p(ee);Y(()=>M(ne,i(G))),ue("click",ee,()=>T(i(G))),C(N,ee)});var A=g(D,2),re=p(A),le=g(p(re),2),oe=g(p(le),2),Z=p(oe);Y((N,G)=>{Ba(x,o()),te=De(x,1,"text-input svelte-r20yry",null,te,N),H(x,"placeholder",l()),H(x,"maxlength",f()),z=De(y,1,"char-counter svelte-r20yry",null,z,G),M(U,`${i(n)??""} / ${f()??""}`),M(Z,`最大${f()??""}文字まで入力できます`)},[()=>({valid:i(r),invalid:!i(r)&&o().length>0}),()=>({warning:i(a)<=10})]),ue("input",x,S),ue("paste",x,E),C(e,j),Ht()}var bi=or('<polygon fill="none" stroke="var(--grid-color, #e0e0e0)" stroke-width="1"></polygon>'),Si=or('<line stroke="var(--axis-color, #666)" stroke-width="1" opacity="0.5"></line>'),xi=or('<circle r="4" fill="var(--data-stroke, rgb(59, 130, 246))" stroke="white" stroke-width="2" role="button" tabindex="0"></circle>'),Ei=or('<text text-anchor="middle" dominant-baseline="central" font-size="12" fill="var(--label-color, #333)" role="button" tabindex="0"> </text>'),Ai=or('<text text-anchor="middle" dominant-baseline="central" class="center-value svelte-jhas6y" font-size="16" font-weight="bold" fill="var(--data-stroke, rgb(59, 130, 246))"> </text>'),ki=L(" <br/> <br/> ",1),Ri=L(" <br/> ",1),zi=L('<div class="tooltip svelte-jhas6y"><strong> </strong><br/> <!></div>'),Ci=L('<div class="radar-chart-container svelte-jhas6y"><svg preserveAspectRatio="xMidYMid meet" class="radar-chart-svg svelte-jhas6y"><!><!><path fill="var(--data-fill, rgba(59, 130, 246, 0.3))" stroke="var(--data-stroke, rgb(59, 130, 246))" stroke-width="2"></path><!><!><!></svg> <!></div>');function Ti(e,t){Wt(t,!1);const r=W(),s=W(),n=W(),a=W(),o=W();let l=ve(t,"data",8,null),u=ve(t,"scoringData",8,null),f=ve(t,"confidence",8,1),v=ve(t,"size",8,300),h=W(null);const _={bright:"明るさ",heavy:"重厚さ",soft:"柔らかさ",sharp:"鋭さ",light:"軽やかさ",brightness:"明るさ",heaviness:"重厚さ",softness:"柔らかさ",sharpness:"鋭さ",hardness:"硬さ"},d=v()/2,c=d*.8;function m(P,y){const z=(P-90)*Math.PI/180;return{x:d+y*Math.cos(z),y:d+y*Math.sin(z)}}de(()=>(V(u()),V(l())),()=>{b(r,(()=>{if(u()&&u().length>0){const P=360/u().length;return u().map((y,z)=>({key:y.category,label:_[y.category]||y.category,angle:z*P,scoreData:y}))}else return l()?[{key:"bright",label:"明るさ",angle:0},{key:"sharp",label:"鋭さ",angle:72},{key:"light",label:"軽やかさ",angle:144},{key:"soft",label:"柔らかさ",angle:216},{key:"heavy",label:"重厚さ",angle:288}]:[]})())}),de(()=>(i(r),V(u()),V(l())),()=>{b(s,i(r).map(P=>{let y,z;u()&&"scoreData"in P?(y=P.scoreData.score/P.scoreData.maxScore,z=Math.max(0,Math.min(1,y))):l()&&P.key in l()?(y=l()[P.key]||0,z=Math.max(-1,Math.min(1,y)),z=(z+1)/2):(y=0,z=0);const U=c*z;return{...P,value:u()?y:y||0,normalizedValue:z,...m(P.angle,U)}}))}),de(()=>i(r),()=>{b(n,[.2,.4,.6,.8,1].map(P=>i(r).map(y=>m(y.angle,c*P))))}),de(()=>i(s),()=>{b(a,i(s).map((P,y)=>`${y===0?"M":"L"} ${P.x} ${P.y}`).join(" ")+" Z")}),de(()=>i(r),()=>{b(o,i(r).map(P=>({...P,...m(P.angle,c+30)})))}),zr(),lr();var S=Ci(),E=p(S),O=p(E);fe(O,1,()=>i(n),we,(P,y,z)=>{var U=bi();De(U,0,`grid-line grid-level-${z+1}`,"svelte-jhas6y"),H(U,"opacity",.3+z*.1),Y(Q=>H(U,"points",Q),[()=>(i(y),R(()=>i(y).map(Q=>`${Q.x},${Q.y}`).join(" ")))]),C(P,U)});var I=g(O);fe(I,1,()=>i(r),we,(P,y)=>{const z=Ve(()=>(i(y),R(()=>m(i(y).angle,c))));var U=Si();Y(()=>{H(U,"x1",d),H(U,"y1",d),H(U,"x2",(V(i(z)),R(()=>i(z).x))),H(U,"y2",(V(i(z)),R(()=>i(z).y)))}),C(P,U)});var T=g(I),j=g(T);fe(j,1,()=>i(s),we,(P,y)=>{var z=xi();let U;Y((Q,w)=>{H(z,"cx",(i(y),R(()=>i(y).x))),H(z,"cy",(i(y),R(()=>i(y).y))),U=De(z,0,"data-point svelte-jhas6y",null,U,Q),H(z,"aria-label",`${i(y),R(()=>i(y).label)??""}: ${w??""}`)},[()=>({hovered:i(h)===i(y).key}),()=>(i(y),R(()=>i(y).value.toFixed(2)))]),ue("mouseenter",z,()=>b(h,i(y).key)),ue("mouseleave",z,()=>b(h,null)),ue("focus",z,()=>b(h,i(y).key)),ue("blur",z,()=>b(h,null)),C(P,z)});var $=g(j);fe($,1,()=>i(o),we,(P,y)=>{var z=Ei();let U;var Q=p(z);Y(w=>{H(z,"x",(i(y),R(()=>i(y).x))),H(z,"y",(i(y),R(()=>i(y).y))),U=De(z,0,"axis-label svelte-jhas6y",null,U,w),H(z,"aria-label",`軸ラベル: ${i(y),R(()=>i(y).label)??""}`),M(Q,(i(y),R(()=>i(y).label)))},[()=>({hovered:i(h)===i(y).key})]),ue("mouseenter",z,()=>b(h,i(y).key)),ue("mouseleave",z,()=>b(h,null)),ue("focus",z,()=>b(h,i(y).key)),ue("blur",z,()=>b(h,null)),C(P,z)});var x=g($);{var te=P=>{const y=Ve(()=>(i(s),i(h),R(()=>i(s).find(w=>w.key===i(h)))));var z=er(),U=gt(z);{var Q=w=>{var D=Ai(),F=p(D);Y(A=>{H(D,"x",d),H(D,"y",d),M(F,A)},[()=>(V(i(y)),R(()=>i(y).value.toFixed(2)))]),C(w,D)};q(U,w=>{i(y)&&w(Q)})}C(P,z)};q(x,P=>{i(h)&&P(te)})}var ce=g(E,2);{var ke=P=>{const y=Ve(()=>(i(s),i(h),R(()=>i(s).find(w=>w.key===i(h)))));var z=er(),U=gt(z);{var Q=w=>{var D=zi(),F=p(D),A=p(F),re=g(F,3);{var le=Z=>{var N=ki(),G=gt(N),ee=g(G,2),ne=g(ee,2);Y((Se,ie)=>{M(G,`スコア: ${Se??""}%`),M(ee,` 信頼度: ${ie??""}%`),M(ne,` 適用ルール: ${V(i(y)),R(()=>i(y).scoreData.appliedRules.length)??""}個`)},[()=>(V(i(y)),R(()=>(i(y).value*100).toFixed(1))),()=>(V(i(y)),R(()=>(i(y).scoreData.confidence*100).toFixed(0)))]),C(Z,N)},oe=Z=>{var N=Ri(),G=gt(N),ee=g(G,2);Y((ne,Se)=>{M(G,`スコア: ${ne??""}`),M(ee,` 信頼度: ${Se??""}%`)},[()=>(V(i(y)),R(()=>i(y).value.toFixed(2))),()=>(V(f()),R(()=>(f()*100).toFixed(0)))]),C(Z,N)};q(re,Z=>{u()&&"scoreData"in i(y)?Z(le):Z(oe,!1)})}Y(()=>{tr(D,`--confidence: ${f()??""}`),M(A,(V(i(y)),R(()=>i(y).label)))}),C(w,D)};q(U,w=>{i(y)&&w(Q)})}C(P,z)};q(ce,P=>{i(h)&&P(ke)})}Y(()=>{H(E,"viewBox",`0 0 ${v()??""} ${v()??""}`),H(T,"d",i(a)),H(T,"opacity",f())}),C(e,S),Ht()}const $i=e=>e;function ms(e){const t=e-1;return t*t*t+1}function kn(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Ii(e,{delay:t=0,duration:r=400,easing:s=$i}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:s,css:a=>`opacity: ${a*n}`}}function Oi(e,{delay:t=0,duration:r=400,easing:s=ms,x:n=0,y:a=0,opacity:o=0}={}){const l=getComputedStyle(e),u=+l.opacity,f=l.transform==="none"?"":l.transform,v=u*(1-o),[h,_]=kn(n),[d,c]=kn(a);return{delay:t,duration:r,easing:s,css:(m,S)=>`
			transform: ${f} translate(${(1-m)*h}${_}, ${(1-m)*d}${c});
			opacity: ${u-v*S}`}}function Pi(e,{delay:t=0,duration:r=400,easing:s=ms,start:n=0,opacity:a=0}={}){const o=getComputedStyle(e),l=+o.opacity,u=o.transform==="none"?"":o.transform,f=1-n,v=l*(1-a);return{delay:t,duration:r,easing:s,css:(h,_)=>`
			transform: ${u} scale(${1-f*_});
			opacity: ${l-v*_}
		`}}const ji={hardness:"硬さ",softness:"柔らかさ",brightness:"明るさ",heaviness:"重厚さ",sharpness:"鋭さ"},Ni={"start-consonant":"開始子音","start-vowel":"開始母音","length-short":"短い長さ","length-medium":"中程度長さ","length-long":"長い長さ","repetition-double":"二重繰り返し","repetition-triple":"三重繰り返し","phoneme-consonant":"子音音素","phoneme-vowel":"母音音素","phoneme-special":"特殊音素","ending-n":"「ん」で終了","ending-vowel":"母音で終了"};function Et(e){return ji[e]||e}function yr(e){return Ni[e]||e}var Mi=L('<span class="sound-tag consonant svelte-g6pdjd"> </span>'),Li=L('<div class="sound-group svelte-g6pdjd"><span class="sound-type svelte-g6pdjd">子音:</span> <div class="sound-tags svelte-g6pdjd"></div></div>'),Di=L('<span class="sound-tag vowel svelte-g6pdjd"> </span>'),Fi=L('<div class="sound-group svelte-g6pdjd"><span class="sound-type svelte-g6pdjd">母音:</span> <div class="sound-tags svelte-g6pdjd"></div></div>'),Vi=L('<div class="contributing-sounds svelte-g6pdjd"><h4 class="svelte-g6pdjd">寄与音素</h4> <!> <!></div>'),Wi=L('<span class="factor-tag svelte-g6pdjd"> </span>'),Hi=L('<div class="structural-factors svelte-g6pdjd"><h4 class="svelte-g6pdjd">構造的要因</h4> <div class="factor-list svelte-g6pdjd"></div></div>'),Ui=L('<div class="tooltip-container svelte-g6pdjd"><div><div class="tooltip-header svelte-g6pdjd"><h3 class="category-title svelte-g6pdjd"> </h3> <div class="score-badge svelte-g6pdjd"> </div></div> <div class="score-details svelte-g6pdjd"><div class="score-row svelte-g6pdjd"><span class="label svelte-g6pdjd">レベル:</span> <span> </span></div> <div class="score-row svelte-g6pdjd"><span class="label svelte-g6pdjd">実際スコア:</span> <span class="value svelte-g6pdjd"> </span></div> <div class="score-row svelte-g6pdjd"><span class="label svelte-g6pdjd">最大スコア:</span> <span class="value svelte-g6pdjd"> </span></div> <div class="score-row svelte-g6pdjd"><span class="label svelte-g6pdjd">信頼度:</span> <span class="value svelte-g6pdjd"> </span></div></div> <!> <!> <div class="tooltip-arrow svelte-g6pdjd"></div></div></div>');function qi(e,t){Wt(t,!1);const r=W(),s=W(),n=W(),a=W(),o=W();let l=ve(t,"categoryScore",8),u=ve(t,"visible",8,!1),f=ve(t,"x",8,0),v=ve(t,"y",8,0);ve(t,"containerWidth",8,0),ve(t,"containerHeight",8,0);let h=W(),_=W(0),d=W(0);sn(()=>{const T=()=>{b(_,window.innerWidth),b(d,window.innerHeight)};return T(),window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}});const c={"very-high":"非常に強い",high:"強い",medium:"中程度",low:"弱い","very-low":"非常に弱い"};function m(T){return T.toFixed(2)}function S(T){return T.toFixed(1)}de(()=>(i(_),V(f()),i(h)),()=>{b(r,(()=>{if(!i(_))return f();const T=i(h)?.offsetWidth||(i(_)<=480?280:320),j=16,$=8;let x=f()+j;return x+T+$>i(_)&&(x=f()-T-j),x<$&&(x=$),x})())}),de(()=>(i(d),V(v()),i(h)),()=>{b(s,(()=>{if(!i(d))return v();const T=i(h)?.offsetHeight||280,j=16,$=8;let x=v()+j;return x+T+$>i(d)&&(x=v()-T-j),x<$&&(x=$),x})())}),de(()=>(V(l()),yr),()=>{b(n,(()=>{const T=[],j=[],$=[];return l().appliedRules.forEach(x=>{x.startsWith("子音-")?T.push(x.replace("子音-","")):x.startsWith("母音-")?j.push(x.replace("母音-","")):$.push(yr(x))}),{consonantRules:T,vowelRules:j,structuralRules:$}})())}),de(()=>V(l()),()=>{b(a,l().score/l().maxScore*100)}),de(()=>i(a),()=>{b(o,(()=>{const T=i(a);return T>=80?"very-high":T>=60?"high":T>=40?"medium":T>=20?"low":"very-low"})())}),zr(),lr();var E=er(),O=gt(E);{var I=T=>{var j=Ui(),$=p(j),x=p($),te=p(x),ce=p(te),ke=g(te,2),P=p(ke),y=g(x,2),z=p(y),U=g(p(z),2),Q=p(U),w=g(z,2),D=g(p(w),2),F=p(D),A=g(w,2),re=g(p(A),2),le=p(re),oe=g(A,2),Z=g(p(oe),2),N=p(Z),G=g(y,2);{var ee=ie=>{var xe=Vi(),Oe=g(p(xe),2);{var nt=Re=>{var st=Li(),bt=g(p(st),2);fe(bt,5,()=>(i(n),R(()=>i(n).consonantRules)),we,(pt,St)=>{var at=Mi(),se=p(at);Y(()=>M(se,i(St))),C(pt,at)}),C(Re,st)};q(Oe,Re=>{i(n),R(()=>i(n).consonantRules.length>0)&&Re(nt)})}var Be=g(Oe,2);{var ht=Re=>{var st=Fi(),bt=g(p(st),2);fe(bt,5,()=>(i(n),R(()=>i(n).vowelRules)),we,(pt,St)=>{var at=Di(),se=p(at);Y(()=>M(se,i(St))),C(pt,at)}),C(Re,st)};q(Be,Re=>{i(n),R(()=>i(n).vowelRules.length>0)&&Re(ht)})}C(ie,xe)};q(G,ie=>{i(n),R(()=>i(n).consonantRules.length>0||i(n).vowelRules.length>0)&&ie(ee)})}var ne=g(G,2);{var Se=ie=>{var xe=Hi(),Oe=g(p(xe),2);fe(Oe,5,()=>(i(n),R(()=>i(n).structuralRules)),we,(nt,Be)=>{var ht=Wi(),Re=p(ht);Y(()=>M(Re,i(Be))),C(nt,ht)}),C(ie,xe)};q(ne,ie=>{i(n),R(()=>i(n).structuralRules.length>0)&&ie(Se)})}nn($,ie=>b(h,ie),()=>i(h)),Y((ie,xe,Oe,nt,Be)=>{tr(j,`left: ${i(r)??""}px; top: ${i(s)??""}px;`),De($,1,`tooltip-content level-${i(o)??""}`,"svelte-g6pdjd"),M(ce,ie),M(P,`${xe??""}%`),De(U,1,`value level-indicator level-${i(o)??""}`,"svelte-g6pdjd"),M(Q,(i(o),R(()=>c[i(o)]))),M(F,Oe),M(le,nt),M(N,`${Be??""}%`)},[()=>(V(Et),V(l()),R(()=>Et(l().category))),()=>(i(a),R(()=>S(i(a)))),()=>(V(l()),R(()=>m(l().score))),()=>(V(l()),R(()=>m(l().maxScore))),()=>(V(l()),R(()=>S(l().confidence*100)))]),Fr(3,j,()=>Oi,()=>({y:10,duration:200})),C(T,j)};q(O,T=>{u()&&T(I)})}C(e,E),Ht()}var Yi=L('<div class="overall-score svelte-1nzd1e2"><div class="chart-container svelte-1nzd1e2"><svg preserveAspectRatio="xMidYMid meet" class="donut-chart svelte-1nzd1e2"><circle fill="none" stroke="#ecf0f1"></circle><circle fill="none" stroke="#2ecc71" stroke-linecap="round" class="score-circle svelte-1nzd1e2"></circle><text text-anchor="middle" class="score-text svelte-1nzd1e2"> </text><text text-anchor="middle" class="score-label svelte-1nzd1e2">総合スコア</text><text text-anchor="middle" class="confidence-text svelte-1nzd1e2"> </text></svg></div></div>'),Bi=L("<button> </button>"),Gi=L('<div class="category-expanded svelte-1nzd1e2"><div class="score-breakdown svelte-1nzd1e2"><div class="breakdown-item svelte-1nzd1e2"><span> </span></div> <div class="breakdown-item svelte-1nzd1e2"><span> </span></div> <div class="breakdown-item svelte-1nzd1e2"><span> </span></div></div></div>'),Ki=L('<div role="button" tabindex="0"><div class="category-header svelte-1nzd1e2"><span class="category-name svelte-1nzd1e2"> </span> <span class="category-score svelte-1nzd1e2"> </span></div> <div class="progress-bar svelte-1nzd1e2"><div class="progress-background svelte-1nzd1e2"></div> <div class="progress-fill svelte-1nzd1e2"></div></div> <div class="category-details svelte-1nzd1e2"><span class="confidence"> </span> <span class="applied-rules"> </span></div> <!></div>'),Ji=L("<span> </span>"),Xi=L('<div class="category-filters svelte-1nzd1e2" data-show-details="true"><h3 class="svelte-1nzd1e2">カテゴリフィルター</h3> <div class="filter-buttons svelte-1nzd1e2"><button>すべて</button> <!></div></div> <div class="category-scores svelte-1nzd1e2" data-show-details="true"><h3 class="svelte-1nzd1e2">カテゴリ別スコア</h3> <!></div> <div class="score-breakdown svelte-1nzd1e2"><h4 class="svelte-1nzd1e2">スコア詳細</h4> <div class="breakdown-grid svelte-1nzd1e2"><div class="breakdown-item svelte-1nzd1e2"><span class="label svelte-1nzd1e2">合計スコア:</span> <span class="value svelte-1nzd1e2"> </span></div> <div class="breakdown-item svelte-1nzd1e2"><span class="label svelte-1nzd1e2">最大可能スコア:</span> <span class="value svelte-1nzd1e2"> </span></div> <div class="breakdown-item svelte-1nzd1e2"><span class="label svelte-1nzd1e2">正規化スコア:</span> <span class="value svelte-1nzd1e2"> </span></div></div> <div class="applied-rules-section svelte-1nzd1e2"><h4 class="svelte-1nzd1e2">適用されたルール</h4> <div class="applied-rules-list svelte-1nzd1e2"></div></div></div>',1),Zi=L('<div class="score-display svelte-1nzd1e2" role="region" aria-label="スコア分析結果"><!> <!> <!></div>');function Rn(e,t){Wt(t,!1);const r=W(),s=W(),n=W(),a=W(),o=W();let l=ve(t,"scoringResult",8),u=ve(t,"size",8,300),f=ve(t,"showDetails",8,!0),v=W(null),h=W(null),_=W(0),d=W(0),c=W(),m=W(null);const S={hardness:"#e74c3c",softness:"#3498db",brightness:"#f1c40f",heaviness:"#9b59b6",sharpness:"#e67e22"},E=u()/2,O=E*.7,I=20;function T(A){return(A*100).toFixed(1)}function j(A){return(A*100).toFixed(0)}function $(A){return A==="子音-n"?"special":A.includes("子音")?"consonant":A.includes("母音")?"vowel":A.includes("special")?"special":"structure"}sn(()=>(x(),window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}));function x(){i(c)&&i(c).getBoundingClientRect()}function te(A){b(_,A.clientX),b(d,A.clientY)}function ce(A){i(h)===A?b(h,null):b(h,A)}function ke(A){i(m)===A?b(m,null):b(m,A)}de(()=>{},()=>{b(r,2*Math.PI*O)}),de(()=>(i(r),V(l())),()=>{b(s,i(r)*(1-l().normalizedScore))}),de(()=>V(l()),()=>{b(n,[...l().categoryScores].sort((A,re)=>re.score/re.maxScore-A.score/A.maxScore))}),de(()=>(i(m),i(n)),()=>{b(a,i(m)?i(n).filter(A=>A.category===i(m)):i(n))}),de(()=>(i(v),V(l())),()=>{b(o,i(v)?l().categoryScores.find(A=>A.category===i(v)):null)}),zr(),lr();var P=Zi(),y=p(P);{var z=A=>{var re=Yi(),le=p(re),oe=p(le),Z=p(oe);H(Z,"stroke-width",I);var N=g(Z);H(N,"stroke-width",I);var G=g(N),ee=p(G),ne=g(G),Se=g(ne),ie=p(Se);Y((xe,Oe)=>{H(oe,"viewBox",`0 0 ${u()??""} ${u()??""}`),H(Z,"cx",E),H(Z,"cy",E),H(Z,"r",O),H(N,"cx",E),H(N,"cy",E),H(N,"r",O),H(N,"stroke-dasharray",i(r)),H(N,"stroke-dashoffset",i(s)),H(N,"transform",`rotate(-90 ${E} ${E})`),H(G,"x",E),H(G,"y",E-10),M(ee,`${xe??""}%`),H(ne,"x",E),H(ne,"y",E+15),H(Se,"x",E),H(Se,"y",E+35),M(ie,`信頼度: ${Oe??""}%`)},[()=>(V(l()),R(()=>T(l().normalizedScore))),()=>(V(l()),R(()=>j(l().confidence)))]),C(A,re)};q(y,A=>{f()||A(z)})}var U=g(y,2);{var Q=A=>{var re=Xi(),le=gt(re),oe=g(p(le),2),Z=p(oe);let N;var G=g(Z,2);fe(G,1,()=>i(n),se=>se.category,(se,k)=>{const X=Ve(()=>(i(k),R(()=>S[i(k).category]||"#95a5a6")));var J=Bi();let ge;var he=p(J);Y((He,ze)=>{ge=De(J,1,"filter-button svelte-1nzd1e2",null,ge,He),tr(J,`--filter-color: ${i(X)??""};`),M(he,ze)},[()=>({active:i(m)===i(k).category}),()=>(V(Et),i(k),R(()=>Et(i(k).category)))]),ue("click",J,()=>ke(i(k).category)),C(se,J)});var ee=g(le,2),ne=g(p(ee),2);fe(ne,3,()=>i(a),se=>se.category,(se,k,X)=>{const J=Ve(()=>(i(k),R(()=>i(k).score/i(k).maxScore))),ge=Ve(()=>(i(k),R(()=>S[i(k).category]||"#95a5a6")));var he=Ki();let He;var ze=p(he),it=p(ze),pe=p(it),_e=g(it,2),Pe=p(_e),Ce=g(ze,2),Ge=g(p(Ce),2),Te=g(Ce,2),Ke=p(Te),ot=p(Ke),je=g(Ke,2),Ne=p(je),Je=g(Te,2);{var lt=Ue=>{var qe=Gi(),Me=p(qe),Xe=p(Me),ys=p(Xe),ws=p(ys),on=g(Xe,2),bs=p(on),Ss=p(bs),xs=g(on,2),Es=p(xs),As=p(Es);Y((ks,Rs,zs)=>{M(ws,`実際スコア: ${ks??""}`),M(Ss,`最大スコア: ${Rs??""}`),M(As,`正規化率: ${zs??""}%`)},[()=>(i(k),R(()=>i(k).score.toFixed(2))),()=>(i(k),R(()=>i(k).maxScore.toFixed(2))),()=>(V(i(J)),R(()=>T(i(J))))]),Fr(3,qe,()=>Ii,()=>({duration:200})),C(Ue,qe)};q(Je,Ue=>{i(h),i(k),R(()=>i(h)===i(k).category)&&Ue(lt)})}Y((Ue,qe,Me,Xe)=>{He=De(he,1,"category-item svelte-1nzd1e2",null,He,Ue),M(pe,qe),M(Pe,`${Me??""}%`),tr(Ge,`width: ${i(J)*100}%; background-color: ${i(ge)??""};`),M(ot,`信頼度: ${Xe??""}%`),M(Ne,`適用ルール: ${i(k),R(()=>i(k).appliedRules.length)??""}個`)},[()=>({hovered:i(v)===i(k).category,selected:i(h)===i(k).category}),()=>(V(Et),i(k),R(()=>Et(i(k).category))),()=>(V(i(J)),R(()=>T(i(J)))),()=>(i(k),R(()=>j(i(k).confidence)))]),ue("mouseenter",he,()=>b(v,i(k).category)),ue("mouseleave",he,()=>b(v,null)),ue("click",he,()=>ce(i(k).category)),Fr(1,he,()=>Pi,()=>({duration:300,delay:i(X)*50})),C(se,he)});var Se=g(ee,2),ie=g(p(Se),2),xe=p(ie),Oe=g(p(xe),2),nt=p(Oe),Be=g(xe,2),ht=g(p(Be),2),Re=p(ht),st=g(Be,2),bt=g(p(st),2),pt=p(bt),St=g(ie,2),at=g(p(St),2);fe(at,5,()=>(V(l()),R(()=>[...new Set(l().categoryScores.flatMap(se=>se.appliedRules))].filter(se=>se!=null&&se!==""))),we,(se,k)=>{var X=Ji(),J=p(X);Y((ge,he)=>{De(X,1,`rule-tag ${ge??""}`,"svelte-1nzd1e2"),M(J,he)},[()=>(i(k),R(()=>$(i(k)))),()=>(V(yr),i(k),R(()=>yr(i(k))))]),C(se,X)}),Y((se,k,X,J)=>{N=De(Z,1,"filter-button svelte-1nzd1e2",null,N,se),M(nt,k),M(Re,X),M(pt,`${J??""}%`)},[()=>({active:i(m)===null}),()=>(V(l()),R(()=>l().totalScore.toFixed(2))),()=>(V(l()),R(()=>l().maxPossibleScore.toFixed(2))),()=>(V(l()),R(()=>T(l().normalizedScore)))]),ue("click",Z,()=>b(m,null)),C(A,re)},w=A=>{};q(U,A=>{f()?A(Q):A(w,!1)})}var D=g(U,2);{var F=A=>{qi(A,{get categoryScore(){return i(o)},visible:!0,get x(){return i(_)},get y(){return i(d)},containerWidth:R(()=>window.innerWidth),containerHeight:R(()=>window.innerHeight)})};q(D,A=>{i(o)&&i(v)&&A(F)})}nn(P,A=>b(c,A),()=>i(c)),ue("mousemove",P,te),ue("mouseleave",P,()=>{b(v,null)}),C(e,P),Ht()}var Qi=L("<div><!></div>"),eo=L('<div class="error-message svelte-l075c"><p> </p></div>'),to=L(`<div class="fallback-notice svelte-l075c"><p class="svelte-l075c">📝
        簡易分析モードで表示しています。より詳細な分析のためにひらがな・カタカナのみを入力してください。</p></div>`),ro=L('<div class="loading-state svelte-l075c"><div class="loading-spinner svelte-l075c"></div> <p>分析中...</p></div>'),no=L('<div class="summary-block svelte-l075c"><h3 class="svelte-l075c">分析サマリー</h3> <p class="summary-text svelte-l075c"> </p></div>'),so=L('<div class="summary-block svelte-l075c"><h3 class="svelte-l075c">スコア概要</h3> <p class="summary-text svelte-l075c">総合スコアは <strong> </strong> 点です。 <!></p> <p class="summary-text svelte-l075c"> </p></div>'),ao=L('<div class="detailed-score-section svelte-l075c"><h3 class="svelte-l075c">詳細スコア</h3> <div class="score-container svelte-l075c"><!></div></div>'),io=L('<div class="category-analysis-card card svelte-l075c"><h2 class="svelte-l075c">カテゴリ分析</h2> <!></div>'),oo=L('<span class="impression-tag consonant svelte-l075c"> </span>'),lo=L('<div class="phoneme-group svelte-l075c"><span class="phoneme-label svelte-l075c"> </span> <!></div>'),co=L('<div class="phoneme-category svelte-l075c"><h4 class="svelte-l075c">子音</h4> <div class="tag-container svelte-l075c"></div></div>'),uo=L('<span class="impression-tag vowel svelte-l075c"> </span>'),fo=L('<div class="phoneme-group svelte-l075c"><span class="phoneme-label svelte-l075c"> </span> <!></div>'),vo=L('<div class="phoneme-category svelte-l075c"><h4 class="svelte-l075c">母音</h4> <div class="tag-container svelte-l075c"></div></div>'),ho=L('<span class="impression-tag special svelte-l075c"> </span>'),po=L('<div class="phoneme-group svelte-l075c"><span class="phoneme-label svelte-l075c"> </span> <!></div>'),_o=L('<div class="phoneme-category svelte-l075c"><h4 class="svelte-l075c">特殊音</h4> <div class="tag-container svelte-l075c"></div></div>'),go=L('<div class="analysis-section svelte-l075c"><h3 class="svelte-l075c">音素分析</h3> <!> <!> <!></div>'),mo=L('<span class="impression-tag structure svelte-l075c"> </span>'),yo=L('<div class="structure-group svelte-l075c"><span class="category-label svelte-l075c"> </span> <!></div>'),wo=L('<div class="analysis-section svelte-l075c"><h3 class="svelte-l075c">構造分析</h3> <div class="tag-container svelte-l075c"></div></div>'),bo=L('<section class="results-section svelte-l075c"><div class="summary-card card svelte-l075c"><h2 class="svelte-l075c">総合印象</h2> <!> <!> <div class="confidence-indicator svelte-l075c"><span class="confidence-label svelte-l075c">信頼度:</span> <div class="confidence-bar svelte-l075c"><div class="confidence-fill svelte-l075c"></div></div> <span class="confidence-value svelte-l075c"> </span></div></div> <div class="analysis-results-card card svelte-l075c"><h2 class="svelte-l075c">分析結果と詳細スコア</h2> <div class="analysis-content svelte-l075c"><div class="analysis-chart-section svelte-l075c"><h3 class="svelte-l075c">音象徴分析</h3> <div class="chart-container svelte-l075c"><!></div></div> <!></div></div> <!> <div class="details-card card svelte-l075c"><h2 class="svelte-l075c">詳細分析</h2> <!> <!></div></section>'),So=L('<div class="welcome-message svelte-l075c"><h2 class="svelte-l075c">音象徴分析へようこそ</h2> <p class="svelte-l075c">ひらがな・カタカナで言葉を入力すると、その音の印象を5つの軸で分析します。</p> <ul class="feature-list svelte-l075c"><li class="svelte-l075c">✨ <strong>明るさ</strong> - 音の明暗を測定</li> <li class="svelte-l075c">🏋️ <strong>重厚さ</strong> - 音の重みを測定</li> <li class="svelte-l075c">🪶 <strong>柔らかさ</strong> - 音の質感を測定</li> <li class="svelte-l075c">⚡ <strong>鋭さ</strong> - 音の切れ味を測定</li> <li class="svelte-l075c">🎈 <strong>軽やかさ</strong> - 音の軽快さを測定</li></ul></div>'),xo=L('<div class="app-container svelte-l075c"><header class="app-header svelte-l075c"><h1 class="app-title svelte-l075c">音象徴分析アプリ</h1> <p class="app-subtitle svelte-l075c">ひらがな・カタカナの音の印象を5軸で分析</p> <!></header> <!> <!> <main class="main-content svelte-l075c"><section class="input-section svelte-l075c"><!></section> <!> <!> <!></main></div>');function Eo(e,t){Wt(t,!1);let r=null,s=W(""),n=W(null),a=W(null),o=W(!1),l=W(""),u=W("healthy"),f=W(!1),v=null;sn(async()=>{try{Ze("APP_INIT_START");const w=ui();b(u,w.status),w.status==="warning"&&console.warn("System performance warning:",w.details);const F=window.location.hostname==="naokirin.github.io"?"/sound_symbolism/rules.json":"/rules.json",A=await fetch(F);if(!A.ok)throw new Error("ルールファイルの読み込みに失敗しました");const re=await A.json(),le=_s(re);if(!le.isValid)throw new Error(`ルールファイルが無効です: ${le.error}`);r=re,Ze("APP_INIT_SUCCESS",{hasScoring:!!r.scoring,systemStatus:w.status})}catch(w){console.error("Failed to load rules:",w),Ze("APP_INIT_ERROR",{error:w.message}),b(u,"error"),b(l,w instanceof Error?w.message:"ルールファイルの読み込みに失敗しました。ページを再読み込みしてください。")}});async function h(w){if(!(!r||!w.trim())){b(o,!0),b(l,""),v=null,b(f,!1);try{Ze("ANALYSIS_START",{text:w.slice(0,20)+"..."}),await new Promise(F=>setTimeout(F,150));const D=An(w.trim(),r,!1);if(D.error){if(v=D.error,b(l,ci(D.error)),D.error.code==="INVALID_INPUT"&&w.trim().length>0)try{const F=li(w.trim());b(n,{...F,summary:F.summary+"（簡易分析モード）",impressionScores:{bright:.5,heavy:.5,soft:.5,sharp:.5,light:.5},confidence:.3}),b(f,!0),b(l,""),Ze("FALLBACK_ANALYSIS_SUCCESS")}catch(F){console.error("Fallback analysis failed:",F),b(n,null)}else b(n,null);b(a,null)}else{if(b(n,pi(w.trim(),r)),r.scoring)try{const F=An(w.trim(),r,!0);F.result&&"scoring"in F.result&&F.result.scoring?(b(a,F.result),Ze("SCORING_ANALYSIS_SUCCESS")):(b(a,null),Ze("SCORING_ANALYSIS_SKIPPED"))}catch(F){console.warn("Scoring analysis failed:",F),b(a,null),Ze("SCORING_ANALYSIS_ERROR",{error:F.message})}else b(a,null);Ze("ANALYSIS_SUCCESS")}}catch(D){console.error("Analysis failed:",D),Ze("ANALYSIS_ERROR",{error:D.message}),b(l,"予期しないエラーが発生しました。しばらく時間をおいて再度お試しください。"),b(n,null),b(a,null),b(u,"error")}finally{b(o,!1)}}}function _(w){b(s,w)}function d(w){h(w)}function c(w){if(!w||w.length===0)return"";const D=w.reduce((F,A)=>{const re=A.score/A.maxScore,le=F.score/F.maxScore;return re>le?A:F});return Et(D.category)}lr();var m=xo(),S=p(m),E=g(p(S),4);{var O=w=>{var D=Qi();let F;var A=p(D);{var re=oe=>{var Z=$r("⚠️ システムパフォーマンスに問題があります");C(oe,Z)},le=oe=>{var Z=er(),N=gt(Z);{var G=ee=>{var ne=$r("❌ システムエラーが発生しています");C(ee,ne)};q(N,ee=>{i(u)==="error"&&ee(G)},!0)}C(oe,Z)};q(A,oe=>{i(u)==="warning"?oe(re):oe(le,!1)})}Y(oe=>F=De(D,1,"system-status svelte-l075c",null,F,oe),[()=>({warning:i(u)==="warning",error:i(u)==="error"})]),C(w,D)};q(E,w=>{i(u)!=="healthy"&&w(O)})}var I=g(S,2);{var T=w=>{var D=eo(),F=p(D),A=p(F);Y(()=>M(A,i(l))),C(w,D)};q(I,w=>{i(l)&&w(T)})}var j=g(I,2);{var $=w=>{var D=to();C(w,D)};q(j,w=>{i(f)&&w($)})}var x=g(j,2),te=p(x),ce=p(te);wi(ce,{onInput:_,onAnalyze:d,placeholder:"ひらがな・カタカナを入力してください",maxLength:20,get value(){return i(s)},set value(w){b(s,w)},$$legacy:!0});var ke=g(te,2);{var P=w=>{var D=ro();C(w,D)};q(ke,w=>{i(o)&&w(P)})}var y=g(ke,2);{var z=w=>{var D=bo(),F=p(D),A=g(p(F),2);{var re=k=>{var X=no(),J=g(p(X),2),ge=p(J);Y(()=>M(ge,i(n).summary)),C(k,X)};q(A,k=>{i(n)&&k(re)})}var le=g(A,2);{var oe=k=>{var X=so(),J=g(p(X),2),ge=g(p(J)),he=p(ge),He=g(ge,2);{var ze=_e=>{var Pe=$r();Y(Ce=>M(Pe,Ce),[()=>`特に「${c(i(a).scoring.categoryScores)}」の印象が強く出ています。`]),C(_e,Pe)};q(He,_e=>{i(a).scoring.categoryScores.length>0&&_e(ze)})}var it=g(J,2),pe=p(it);Y(_e=>{M(he,_e),M(pe,i(a).summary)},[()=>Math.round(i(a).scoring.normalizedScore*100)]),C(k,X)};q(le,k=>{i(a)&&i(a).scoring&&k(oe)})}var Z=g(le,2),N=g(p(Z),2),G=p(N),ee=g(N,2),ne=p(ee),Se=g(F,2),ie=g(p(Se),2),xe=p(ie),Oe=g(p(xe),2),nt=p(Oe);{let k=Ve(()=>i(a)?null:i(n).impressionScores),X=Ve(()=>i(a)?.scoring?.categoryScores||null),J=Ve(()=>i(a)?.scoring?.confidence||i(n).confidence);Ti(nt,{get data(){return i(k)},get scoringData(){return i(X)},get confidence(){return i(J)},size:Math.min(350,window.innerWidth-60)})}var Be=g(xe,2);{var ht=k=>{var X=ao(),J=g(p(X),2),ge=p(J);Rn(ge,{get scoringResult(){return i(a).scoring},size:Math.min(400,window.innerWidth-80),showDetails:!1}),C(k,X)};q(Be,k=>{i(a)&&i(a).scoring&&k(ht)})}var Re=g(Se,2);{var st=k=>{var X=io(),J=g(p(X),2);Rn(J,{get scoringResult(){return i(a).scoring},size:Math.min(400,window.innerWidth-80),showDetails:!0}),C(k,X)};q(Re,k=>{i(a)&&i(a).scoring&&k(st)})}var bt=g(Re,2),pt=g(p(bt),2);{var St=k=>{var X=go(),J=g(p(X),2);{var ge=pe=>{var _e=co(),Pe=g(p(_e),2);fe(Pe,5,()=>Object.entries(i(n).phonemeAnalysis.consonants),we,(Ce,Ge)=>{var Te=ur(()=>cr(i(Ge),2));let Ke=()=>i(Te)[0],ot=()=>i(Te)[1];var je=lo(),Ne=p(je),Je=p(Ne),lt=g(Ne,2);fe(lt,1,()=>[...new Set(ot())],we,(Ue,qe)=>{var Me=oo(),Xe=p(Me);Y(()=>M(Xe,i(qe))),C(Ue,Me)}),Y(()=>M(Je,Ke())),C(Ce,je)}),C(pe,_e)};q(J,pe=>{Object.keys(i(n).phonemeAnalysis.consonants).length>0&&pe(ge)})}var he=g(J,2);{var He=pe=>{var _e=vo(),Pe=g(p(_e),2);fe(Pe,5,()=>Object.entries(i(n).phonemeAnalysis.vowels),we,(Ce,Ge)=>{var Te=ur(()=>cr(i(Ge),2));let Ke=()=>i(Te)[0],ot=()=>i(Te)[1];var je=fo(),Ne=p(je),Je=p(Ne),lt=g(Ne,2);fe(lt,1,()=>[...new Set(ot())],we,(Ue,qe)=>{var Me=uo(),Xe=p(Me);Y(()=>M(Xe,i(qe))),C(Ue,Me)}),Y(()=>M(Je,Ke())),C(Ce,je)}),C(pe,_e)};q(he,pe=>{Object.keys(i(n).phonemeAnalysis.vowels).length>0&&pe(He)})}var ze=g(he,2);{var it=pe=>{var _e=_o(),Pe=g(p(_e),2);fe(Pe,5,()=>Object.entries(i(n).phonemeAnalysis.special),we,(Ce,Ge)=>{var Te=ur(()=>cr(i(Ge),2));let Ke=()=>i(Te)[0],ot=()=>i(Te)[1];var je=po(),Ne=p(je),Je=p(Ne),lt=g(Ne,2);fe(lt,1,()=>[...new Set(ot())],we,(Ue,qe)=>{var Me=ho(),Xe=p(Me);Y(()=>M(Xe,i(qe))),C(Ue,Me)}),Y(()=>M(Je,Ke())),C(Ce,je)}),C(pe,_e)};q(ze,pe=>{Object.keys(i(n).phonemeAnalysis.special).length>0&&pe(it)})}C(k,X)};q(pt,k=>{i(n).phonemeAnalysis&&k(St)})}var at=g(pt,2);{var se=k=>{var X=wo(),J=g(p(X),2);fe(J,5,()=>Object.entries(i(n).details),we,(ge,he)=>{var He=ur(()=>cr(i(he),2));let ze=()=>i(He)[0],it=()=>i(He)[1];var pe=er(),_e=gt(pe);{var Pe=Ce=>{var Ge=yo(),Te=p(Ge),Ke=p(Te),ot=g(Te,2);fe(ot,1,()=>[...new Set(it())],we,(je,Ne)=>{var Je=mo(),lt=p(Je);Y(()=>M(lt,i(Ne))),C(je,Je)}),Y(()=>M(Ke,ze()==="start"?"開始音":ze()==="end"?"終了音":ze()==="length"?"長さ":ze()==="repetition"?"繰り返し":ze())),C(Ce,Ge)};q(_e,Ce=>{it().length>0&&Ce(Pe)})}C(ge,pe)}),C(k,X)};q(at,k=>{i(n).details&&Object.keys(i(n).details).length>0&&k(se)})}Y(k=>{tr(G,`width: ${(i(a)?i(a).confidence||0:i(n).confidence)*100}%`),M(ne,`${k??""}%`)},[()=>Math.round((i(a)?i(a).confidence||0:i(n).confidence)*100)]),C(w,D)};q(y,w=>{i(n)&&!i(o)&&w(z)})}var U=g(y,2);{var Q=w=>{var D=So();C(w,D)};q(U,w=>{!i(n)&&!i(o)&&!i(s)&&w(Q)})}C(e,m),Ht()}La(Eo,{target:document.getElementById("app")});
